{
  outputStack=GroovyPageOutputStack.currentStack(true,target,false,true);
  out=outputStack.getProxyWriter();
  this.webRequest=grailsWebRequest;
  if (grailsWebRequest != null) {
    grailsWebRequest.setOut(out);
    request=grailsWebRequest.getCurrentRequest();
  }
  getBinding().getVariables().put(OUT,out);
  if (codecClass != null) {
    codecOut=new CodecPrintWriter(grailsApplication,out,codecClass);
  }
 else {
    codecOut=out;
  }
  getBinding().getVariables().put(CODEC_OUT,codecOut);
}
