{
  for (int i=0; i < domainClasses.length; i++) {
    GrailsDomainClassProperty[] props=domainClasses[i].getPersistantProperties();
    for (int j=0; j < props.length; j++) {
      if (props[j].isAssociation()) {
        GrailsDomainClassProperty prop=props[j];
        GrailsDomainClass referencedGrailsDomainClass=(GrailsDomainClass)domainMap.get(props[j].getReferencedPropertyType().getName());
        prop.setReferencedDomainClass(referencedGrailsDomainClass);
      }
    }
  }
  for (int i=0; i < domainClasses.length; i++) {
    GrailsDomainClassProperty[] props=domainClasses[i].getPersistantProperties();
    for (int j=0; j < props.length; j++) {
      if (props[j].isAssociation()) {
        GrailsDomainClassProperty prop=props[j];
        GrailsDomainClass referenced=prop.getReferencedDomainClass();
        if (referenced != null) {
          GrailsDomainClassProperty[] referencedProperties=referenced.getPersistantProperties();
          for (int k=0; k < referencedProperties.length; k++) {
            if (domainClasses[i].getClazz().equals(referencedProperties[k].getReferencedPropertyType())) {
              prop.setOtherSide(referencedProperties[k]);
              break;
            }
          }
        }
      }
    }
  }
}
