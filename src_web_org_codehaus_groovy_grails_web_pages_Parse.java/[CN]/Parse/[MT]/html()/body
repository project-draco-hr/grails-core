{
  if (!finalPass)   return;
  if (LOG.isDebugEnabled())   LOG.debug("parse: html");
  String text=scan.getToken();
  if (Pattern.compile("\\S").matcher(text).find())   bufferWhiteSpace=false;
  StringWriter sw=new StringWriter();
  PrintWriter pw=new PrintWriter(sw);
  String[] lines=text.split("\\n");
  if (lines.length == 1 && !StringUtils.isBlank(lines[0])) {
    out.printlnToResponse('\'' + escapeGroovy(lines[0]) + '\'');
  }
 else {
    pw.print(START_MULTILINE_STRING);
    boolean hasContent=false;
    for (int i=0; i < lines.length; i++) {
      String line=lines[i];
      final String content=escapeGroovy(line);
      if (!StringUtils.isBlank(content)) {
        hasContent=true;
        pw.println(content);
      }
    }
    pw.println(END_MULTILINE_STRING);
    if (hasContent && !bufferWhiteSpace) {
      final String constantValue=sw.toString();
      final String constantName="STATIC_HTML_CONTENT_" + constantCount++;
      constants.put(constantName,constantValue);
      out.printlnToResponse(constantName);
    }
  }
}
