{
  if (currentBeanConfig != null) {
    if (value instanceof GString)     value=value.toString();
    if (value instanceof List) {
      deferredProperties.put(currentBeanConfig.getName() + name,new DeferredProperty(currentBeanConfig,name,value));
      return;
    }
 else     if (value instanceof Map) {
      deferredProperties.put(currentBeanConfig.getName() + name,new DeferredProperty(currentBeanConfig,name,value));
      return;
    }
 else     if (value instanceof Closure) {
      BeanConfiguration current=currentBeanConfig;
      try {
        Closure callable=(Closure)value;
        currentBeanConfig=springConfig.createSingletonBean(callable.getParameterTypes()[0]);
        callable.call(null);
        value=currentBeanConfig.getBeanDefinition();
      }
  finally {
        currentBeanConfig=current;
      }
    }
    currentBeanConfig.addProperty(name,value);
  }
}
