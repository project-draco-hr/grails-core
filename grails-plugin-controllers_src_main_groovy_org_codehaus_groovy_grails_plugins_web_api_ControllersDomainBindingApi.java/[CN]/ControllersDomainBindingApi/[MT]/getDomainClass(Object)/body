{
  GrailsDomainClass domainClass=GrailsMetaClassUtils.getPropertyIfExists(instance,GrailsDomainClassProperty.DOMAIN_CLASS,GrailsDomainClass.class);
  if (domainClass != null) {
    return domainClass;
  }
  GrailsWebRequest webRequest=GrailsWebRequest.lookup();
  if (webRequest == null) {
    return null;
  }
  ApplicationContext applicationContext=webRequest.getApplicationContext();
  if (applicationContext == null) {
    return null;
  }
  GrailsApplication grailsApplication=applicationContext.containsBean(GrailsApplication.APPLICATION_ID) ? applicationContext.getBean(GrailsApplication.APPLICATION_ID,GrailsApplication.class) : null;
  if (grailsApplication != null) {
    return (GrailsDomainClass)grailsApplication.getArtefact(DomainClassArtefactHandler.TYPE,instance.getClass().getName());
  }
  return null;
}
