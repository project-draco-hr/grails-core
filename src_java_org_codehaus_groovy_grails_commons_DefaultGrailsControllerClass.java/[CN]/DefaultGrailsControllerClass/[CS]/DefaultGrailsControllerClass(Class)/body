{
  super(clazz,CONTROLLER);
  this.uri=SLASH + GrailsNameUtils.getPropertyNameRepresentation(getName());
  defaultActionName=getStaticPropertyValue(DEFAULT_CLOSURE_PROPERTY,String.class);
  if (defaultActionName == null) {
    defaultActionName=INDEX_ACTION;
  }
  Collection closureNames=new ArrayList();
  this.uri2viewMap=new HashMap();
  this.uri2closureMap=new HashMap();
  this.viewNames=new HashMap();
  this.controllerPath=uri + SLASH;
  PropertyDescriptor[] propertyDescriptors=getPropertyDescriptors();
  for (int i=0; i < propertyDescriptors.length; i++) {
    PropertyDescriptor propertyDescriptor=propertyDescriptors[i];
    Method readMethod=propertyDescriptor.getReadMethod();
    if (readMethod != null && !Modifier.isStatic(readMethod.getModifiers())) {
      if (propertyDescriptor.getPropertyType() == Object.class) {
        String closureName=propertyDescriptor.getName();
        if (closureName.endsWith(FLOW_SUFFIX)) {
          String flowId=closureName.substring(0,closureName.length() - FLOW_SUFFIX.length());
          flows.put(flowId,propertyDescriptor);
          closureName=flowId;
        }
        closureNames.add(closureName);
        configureMappingForClosureProperty(controllerPath,closureName);
      }
    }
  }
  if (!isReadableProperty(defaultActionName) && closureNames.size() == 1) {
    defaultActionName=((String)closureNames.iterator().next());
  }
  configureDefaultActionIfSet();
  configureURIsForCurrentState();
}
