{
  String var=attributes.get(ATTRIBUTE_VAR);
  String status=attributes.get(ATTRIBUTES_STATUS);
  var=extractAttributeValue(var);
  status=extractAttributeValue(status);
  boolean hasStatus=!StringUtils.isBlank(status);
  boolean hasVar=!StringUtils.isBlank(var);
  if (hasStatus && !hasVar) {
    throw new GrailsTagException(ERROR_NO_VAR_WITH_STATUS);
  }
  if (var.equals(status) && (hasStatus)) {
    throw new GrailsTagException("Attribute [" + ATTRIBUTE_VAR + "] cannot have the same value as attribute ["+ ATTRIBUTES_STATUS+ "]");
  }
  if (hasStatus) {
    out.println("loop:{");
    out.println("int " + status + " = 0");
  }
  if (!hasVar) {
    var="_it" + System.currentTimeMillis();
    foreachRenamedIt=var;
  }
  out.print("for( " + var);
  out.print(" in ");
  out.print(parser != null ? parser.getExpressionText(in,false) : extractAttributeValue(in));
  out.print(" )");
  out.print(" {");
  out.println();
}
