{
  stack.pop();
  try {
    flushCodecPrintWriters();
  }
 catch (  IOException e) {
    throw new RuntimeException("Error flushing",e);
  }
  resetWriters();
  if (stack.size() > 0) {
    StackEntry stackEntry=stack.peek();
    if (forceSync) {
      applyWriterThreadLocals(stackEntry.originalTarget);
    }
  }
}
