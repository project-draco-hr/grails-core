{
  GroovyClassLoader gcl=new GroovyClassLoader();
  final Class testClass=gcl.parseClass("class Test { def invokeMe() {'hello'} }");
  GroovyObject go=(GroovyObject)testClass.newInstance();
  ProxyMetaClass pmc=ProxyMetaClass.getInstance(testClass);
  go.setMetaClass(pmc);
  pmc.setInterceptor(new Interceptor(){
    public Object beforeInvoke(    Object object,    String methodName,    Object[] arguments,    InvocationCallback callback){
      callback.markInvoked();
      return "success";
    }
    public Object afterInvoke(    Object object,    String methodName,    Object[] arguments,    Object result){
      return result;
    }
  }
);
  Object result=go.invokeMethod("invokeMe",null);
  assertNotNull(result);
  assertEquals("success",result);
}
