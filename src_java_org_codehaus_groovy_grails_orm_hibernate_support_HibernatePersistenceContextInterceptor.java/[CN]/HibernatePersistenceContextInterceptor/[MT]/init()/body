{
  if (++nestingCount > 1) {
    return;
  }
  if (TransactionSynchronizationManager.hasResource(sessionFactory)) {
    participate=true;
  }
 else {
    LOG.debug("Opening single Hibernate session in HibernatePersistenceContextInterceptor");
    Session session=getSession();
    session.enableFilter("dynamicFilterEnabler");
    session.setFlushMode(FlushMode.AUTO);
    TransactionSynchronizationManager.bindResource(sessionFactory,new SessionHolder(session));
  }
}
