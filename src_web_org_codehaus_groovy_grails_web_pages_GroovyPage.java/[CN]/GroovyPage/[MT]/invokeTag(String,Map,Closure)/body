{
  final GrailsWebRequest webRequest=(GrailsWebRequest)getBinding().getVariable(WEB_REQUEST);
  final Writer out=webRequest.getOut();
  try {
    if (this.application == null)     initPageState();
    GroovyObject tagLib=getTagLib(tagName);
    if (tagLib != null) {
      Object tagLibProp;
      BeanWrapper bean=getTagLibraryBean(tagLib,webRequest);
      if (bean.isWritableProperty(tagName)) {
        tagLibProp=tagLib.getProperty(tagName);
      }
 else {
        throw new GrailsTagException("Tag [" + tagName + "] does not exist in tag library ["+ tagLib.getClass().getName()+ "]");
      }
      if (tagLibProp instanceof Closure) {
        Closure tag=setupTagClosure(tagLibProp);
        if (tag.getParameterTypes().length == 1) {
          tag.call(new Object[]{attrs});
          if (body != null) {
            body.call();
          }
        }
        if (tag.getParameterTypes().length == 2) {
          tag.call(new Object[]{attrs,body});
        }
      }
 else {
        throw new GrailsTagException("Tag [" + tagName + "] does not exist in tag library ["+ tagLib.getClass().getName()+ "]");
      }
    }
 else {
      throw new GrailsTagException("Tag [" + tagName + "] does not exist. No tag library found.");
    }
  }
  finally {
    getBinding().setVariable(OUT,out);
    webRequest.setOut(out);
  }
}
