{
  ModuleRevisionId moduleRevisionId=dependencyDescriptor.getDependencyRevisionId();
  ModuleId moduleId=moduleRevisionId.getModuleId();
  if (hasDependency(moduleId)) {
    return;
  }
  String scope=dependencyDescriptor.getModuleConfigurations()[0];
  EnhancedDefaultDependencyDescriptor enhancedDependencyDescriptor=new EnhancedDefaultDependencyDescriptor(moduleRevisionId,false,true,scope);
  for (  ExcludeRule excludeRule : dependencyDescriptor.getAllExcludeRules()) {
    ModuleId excludedModule=excludeRule.getId().getModuleId();
    enhancedDependencyDescriptor.addRuleForModuleId(excludedModule,scope);
  }
  registerDependency(scope,enhancedDependencyDescriptor);
}
