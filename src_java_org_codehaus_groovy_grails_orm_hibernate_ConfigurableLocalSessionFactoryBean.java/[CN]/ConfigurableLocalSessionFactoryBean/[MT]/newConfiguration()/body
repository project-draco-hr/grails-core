{
  Object config=BeanUtils.instantiateClass(configClass);
  if (config instanceof GrailsDomainConfiguration) {
    GrailsDomainConfiguration grailsConfig=(GrailsDomainConfiguration)config;
    grailsConfig.setGrailsApplication(grailsApplication);
  }
  if (currentSessionContextClass != null) {
    ((Configuration)config).setProperty(Environment.CURRENT_SESSION_CONTEXT_CLASS,currentSessionContextClass.getName());
    setExposeTransactionAwareSessionFactory(false);
  }
  return (Configuration)config;
}
