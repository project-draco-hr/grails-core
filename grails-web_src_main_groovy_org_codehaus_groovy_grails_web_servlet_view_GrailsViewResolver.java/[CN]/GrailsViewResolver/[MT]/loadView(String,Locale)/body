{
  Assert.notNull(templateEngine,"Property [templateEngine] cannot be null");
  if (viewName.endsWith(GSP_SUFFIX)) {
    viewName=viewName.substring(0,viewName.length() - GSP_SUFFIX.length());
  }
  if (developmentMode) {
    return createGrailsView(viewName);
  }
  View view=VIEW_CACHE.get(viewName);
  if (view == null || (templateEngine.isReloadEnabled() && view instanceof GroovyPageView && ((GroovyPageView)view).isExpired())) {
    view=createGrailsView(viewName);
  }
  VIEW_CACHE.put(viewName,view);
  return view;
}
