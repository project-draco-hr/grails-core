{
  GroovyClassLoader gcl=new GroovyClassLoader();
  GrailsApplication app=new DefaultGrailsApplication(new Class[0],gcl);
  MockApplicationContext parent=new MockApplicationContext();
  parent.registerMockBean(GrailsApplication.APPLICATION_ID,app);
  GrailsRuntimeConfigurator conf=new GrailsRuntimeConfigurator(app,parent);
  DefaultGrailsPluginManager manager=new DefaultGrailsPluginManager(new Class[0],app);
  manager.setParentApplicationContext(parent);
  parent.registerMockBean("manager",manager);
  conf.setPluginManager(manager);
  List pluginList=new ArrayList();
  addPlugin(gcl,app,pluginList,"OneGrailsPlugin",null);
  addPlugin(gcl,app,pluginList,"TwoGrailsPlugin","[one: 1.1]");
  addPlugin(gcl,app,pluginList,"ThreeGrailsPlugin",null);
  addPlugin(gcl,app,pluginList,"FourGrailsPlugin","[two: 1.1, three: 1.1]");
  addPlugin(gcl,app,pluginList,"FiveGrailsPlugin","[three: 1.1]");
  return pluginList;
}
