{
  Class<?> namingStrategyClass=null;
  NamingStrategy namingStrategy;
  if (strategy instanceof Class<?>) {
    namingStrategyClass=(Class<?>)strategy;
  }
 else   if (strategy instanceof CharSequence) {
    namingStrategyClass=Thread.currentThread().getContextClassLoader().loadClass(strategy.toString());
  }
  if (namingStrategyClass == null) {
    namingStrategy=(NamingStrategy)strategy;
  }
 else {
    namingStrategy=(NamingStrategy)namingStrategyClass.newInstance();
  }
  NAMING_STRATEGIES.put(datasourceName,namingStrategy);
}
