{
  Serializable id=getRequestId();
  if (id == null) {
    LOG.debug("[ScaffoldRequestHandler] No ID parameter [" + id + "] for request [update]");
    callback.setInvoked(false);
    return Collections.EMPTY_MAP;
  }
  Object domainObject=this.domain.get(id);
  WebRequest webRequest=(WebRequest)RequestContextHolder.currentRequestAttributes();
  InvokerHelper.setProperty(domainObject,"properties",webRequest.getParameterMap());
  Errors domainObjectErrors=(Errors)InvokerHelper.getProperty(domainObject,"errors");
  Map model=new HashMap();
  model.put(this.domain.getSingularName(),domainObject);
  model.put(PARAM_ID,id);
  if (!domainObjectErrors.hasErrors() && this.domain.update(domainObject,callback)) {
    callback.setInvoked(true);
  }
 else {
    callback.setInvoked(false);
  }
  return model;
}
