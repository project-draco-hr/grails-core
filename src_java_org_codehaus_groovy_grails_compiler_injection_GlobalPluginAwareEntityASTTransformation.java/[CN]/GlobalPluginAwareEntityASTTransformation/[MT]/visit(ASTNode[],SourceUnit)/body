{
  ASTNode astNode=astNodes[0];
  if (astNode instanceof ModuleNode) {
    ModuleNode moduleNode=(ModuleNode)astNode;
    List classes=moduleNode.getClasses();
    if (classes.size() > 0) {
      ClassNode classNode=(ClassNode)classes.get(0);
      File sourcePath=new File(sourceUnit.getName());
      try {
        String absolutePath=sourcePath.getCanonicalPath();
        if (pluginBuildSettings != null) {
          PluginInfo info=pluginBuildSettings.getPluginInfoForSource(absolutePath);
          if (info != null) {
            final AnnotationNode annotationNode=new AnnotationNode(new ClassNode(GrailsPlugin.class));
            annotationNode.addMember(org.codehaus.groovy.grails.plugins.GrailsPlugin.NAME,new ConstantExpression(info.getName()));
            annotationNode.addMember(org.codehaus.groovy.grails.plugins.GrailsPlugin.VERSION,new ConstantExpression(info.getVersion()));
            annotationNode.setRuntimeRetention(true);
            annotationNode.setClassRetention(true);
            classNode.addAnnotation(annotationNode);
          }
        }
      }
 catch (      IOException e) {
      }
    }
  }
}
