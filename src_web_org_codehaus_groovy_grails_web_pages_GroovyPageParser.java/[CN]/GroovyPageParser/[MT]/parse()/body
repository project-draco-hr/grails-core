{
  StringWriter sw=new StringWriter();
  out=new GSPWriter(sw,this);
  page();
  finalPass=true;
  scan.reset();
  previousContentWasNonWhitespace=false;
  currentlyBufferingWhitespace=false;
  page();
  InputStream in=null;
  try {
    in=new ByteArrayInputStream(sw.toString().getBytes(GROOVY_SOURCE_CHAR_ENCODING));
  }
 catch (  UnsupportedEncodingException e) {
    throw new RuntimeException("Grails cannot run unless your environment supports UTF-8!");
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Compiled GSP into Groovy code: " + sw.toString());
  }
  scan=null;
  return in;
}
