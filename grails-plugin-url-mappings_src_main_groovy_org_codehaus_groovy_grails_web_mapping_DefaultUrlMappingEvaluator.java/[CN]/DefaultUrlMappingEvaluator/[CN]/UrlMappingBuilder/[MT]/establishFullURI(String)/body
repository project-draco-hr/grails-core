{
  if (parentResources.isEmpty()) {
    return uri;
  }
  StringBuilder uriBuilder=new StringBuilder();
  ParentResource parentResource=parentResources.peek();
  if (parentResource.isSingle) {
    uriBuilder.append(parentResource.uri);
  }
 else {
    if (parentResource.controllerName != null) {
      uriBuilder.append(parentResource.uri).append(SLASH).append(CAPTURING_WILD_CARD);
      getCurrentConstraints().add(new ConstrainedProperty(UrlMapping.class,parentResource.controllerName + "Id",String.class));
    }
  }
  uriBuilder.append(uri);
  return uriBuilder.toString();
}
