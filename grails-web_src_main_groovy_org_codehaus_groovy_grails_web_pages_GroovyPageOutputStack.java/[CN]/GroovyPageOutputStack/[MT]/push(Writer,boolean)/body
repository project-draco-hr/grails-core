{
  if (cloneStackIfSameWriter(newWriter)) {
    return;
  }
  if (checkExisting)   checkExistingStack(newWriter);
  GroovyPageOutputStackAttributes.Builder attributesBuilder=new GroovyPageOutputStackAttributes.Builder();
  if (stack.size() > 0) {
    StackEntry stackEntry=stack.peek();
    attributesBuilder.pageEncoder(stackEntry.pageEncoder);
    attributesBuilder.templateEncoder(stackEntry.templateEncoder);
    attributesBuilder.defaultEncoder(stackEntry.defaultEncoder);
  }
  attributesBuilder.topWriter(newWriter);
  push(attributesBuilder.build(),false);
}
