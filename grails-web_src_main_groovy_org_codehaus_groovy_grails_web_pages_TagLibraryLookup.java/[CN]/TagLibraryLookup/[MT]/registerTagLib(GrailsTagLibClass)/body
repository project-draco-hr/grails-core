{
  String namespace=taglib.getNamespace();
  namespaceDispatchers.put(namespace,new NamespacedTagDispatcher(namespace,GroovyPage.class,grailsApplication,this));
  Set<String> tagsThatReturnObject=tagsThatReturnObjectForNamespace.get(namespace);
  if (tagsThatReturnObject == null) {
    tagsThatReturnObject=new HashSet<String>();
    tagsThatReturnObjectForNamespace.put(namespace,tagsThatReturnObject);
  }
  Map<String,Object> tags=tagNamespaces.get(namespace);
  if (tags == null) {
    tags=new HashMap<String,Object>();
    tagNamespaces.put(namespace,tags);
  }
  for (  String tagName : taglib.getTagNames()) {
    putTagLib(tags,tagName,taglib);
    tagsThatReturnObject.remove(tagName);
  }
  for (  String tagName : taglib.getTagNamesThatReturnObject()) {
    tagsThatReturnObject.add(tagName);
  }
  Map<String,Object> encodeAsForTagNamespace=encodeAsForTagNamespaces.get(namespace);
  if (encodeAsForTagNamespace == null) {
    encodeAsForTagNamespace=new HashMap<String,Object>();
    encodeAsForTagNamespaces.put(namespace,encodeAsForTagNamespace);
  }
  for (  String tagName : taglib.getTagNames()) {
    Object codecInfo=taglib.getEncodeAsForTag(tagName);
    if (codecInfo != null) {
      encodeAsForTagNamespace.put(tagName,codecInfo);
    }
  }
}
