{
  AbstractUrlBasedView view=buildView(viewName);
  ServletContext context=getServletContext();
  if (this.resolvedCache.containsKey(viewName)) {
    view.setUrl((String)this.resolvedCache.get(viewName));
  }
 else {
    URL res=context.getResource(view.getUrl());
    if (res == null) {
      String gspView=localPrefix + viewName + GSP_SUFFIX;
      res=context.getResource(gspView);
      if (res != null) {
        view.setUrl(gspView);
        this.resolvedCache.put(viewName,gspView);
      }
    }
 else {
      this.resolvedCache.put(viewName,view.getUrl());
    }
  }
  view.setApplicationContext(getApplicationContext());
  view.afterPropertiesSet();
  return view;
}
