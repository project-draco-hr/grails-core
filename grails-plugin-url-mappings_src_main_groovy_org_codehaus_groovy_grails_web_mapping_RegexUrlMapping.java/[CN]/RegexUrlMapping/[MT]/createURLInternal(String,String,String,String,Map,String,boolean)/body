{
  if (paramValues == null)   paramValues=new HashMap();
  boolean hasController=!StringUtils.isBlank(controller);
  boolean hasAction=!StringUtils.isBlank(action);
  boolean hasPlugin=!StringUtils.isBlank(pluginName);
  boolean hasControllerNamespace=!StringUtils.isBlank(controllerNamespace);
  try {
    if (hasController) {
      paramValues.put(CONTROLLER,controller);
    }
    if (hasAction) {
      paramValues.put(ACTION,action);
    }
    if (hasPlugin) {
      paramValues.put("plugin",pluginName);
    }
    if (hasControllerNamespace) {
      paramValues.put("controllerNamespace",controllerNamespace);
    }
    return createURLInternal(paramValues,encoding,includeContextPath);
  }
  finally {
    if (hasController) {
      paramValues.remove(CONTROLLER);
    }
    if (hasAction) {
      paramValues.remove(ACTION);
    }
    if (hasPlugin) {
      paramValues.remove("plugin");
    }
  }
}
