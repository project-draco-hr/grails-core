{
  if (showSource) {
    response.setContentType("text/plain");
    send(pageMeta.groovySource,out);
    pageMeta.groovySource=null;
  }
 else {
    if (LOG.isDebugEnabled() && !response.isCommitted()) {
      LOG.debug("Writing response with content type: " + pageMeta.contentType);
    }
    if (!response.isCommitted())     response.setContentType(pageMeta.contentType);
    Binding binding=getBinding(request,response,out);
    Script page=InvokerHelper.createScript(pageMeta.servletScriptClass,binding);
    page.run();
  }
  return out;
}
