{
  Writer originalOut=webRequest.getOut();
  try {
    final GroovyPageTagWriter capturedOut=createWriter();
    if (args != null) {
      if (args instanceof Map) {
        Map delegate=binding.getVariables();
        final Map argMap=(Map)args;
        delegate.putAll(argMap);
        try {
          bodyClosure.call(args);
        }
  finally {
          for (Iterator i=argMap.keySet().iterator(); i.hasNext(); ) {
            Object o=i.next();
            delegate.remove(o);
          }
        }
      }
 else {
        bodyClosure.call(args);
      }
    }
 else {
      bodyClosure.call();
    }
    String output=capturedOut.getValue();
    if (output == null)     return BLANK_STRING;
    return output;
  }
  finally {
    if (binding != null) {
      binding.setVariable(GroovyPage.OUT,originalOut);
    }
    webRequest.setOut(originalOut);
  }
}
