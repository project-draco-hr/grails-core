{
  Closure interceptor=null;
  if (ip instanceof Map) {
    Map ipMap=(Map)ip;
    if (ipMap.containsKey(ACTION)) {
      interceptor=(Closure)ipMap.get(ACTION);
    }
  }
 else   if (ip instanceof Closure) {
    interceptor=(Closure)ip;
  }
  if (interceptor != null && interceptor.getDelegate() != controller) {
    interceptor=(Closure)interceptor.clone();
    interceptor.setDelegate(controller);
    interceptor.setResolveStrategy(Closure.DELEGATE_FIRST);
  }
  return interceptor;
}
