{
  if (persistentProperty.isEmbedded()) {
    return persistentProperty.getComponent();
  }
 else {
    if (grailsApplication != null && !(associatedObject instanceof HibernateProxy))     return (GrailsDomainClass)grailsApplication.getArtefact(DomainClassArtefactHandler.TYPE,associatedObject.getClass().getName());
 else     return persistentProperty.getReferencedDomainClass();
  }
}
