{
  GrailsWebRequest webRequest=GrailsWebRequest.lookup(request);
  HttpServletResponse previousResponse=webRequest.getWrappedResponse();
  try {
    webRequest.setWrappedResponse(contentBufferingResponse);
    chain.doFilter(request,contentBufferingResponse);
  }
  finally {
    webRequest.setWrappedResponse(previousResponse);
  }
}
