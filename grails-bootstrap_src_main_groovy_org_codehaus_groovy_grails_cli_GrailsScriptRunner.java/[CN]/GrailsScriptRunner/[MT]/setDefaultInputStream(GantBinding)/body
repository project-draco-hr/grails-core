{
  AntBuilder antBuilder=(AntBuilder)binding.getVariable("ant");
  Project p=antBuilder.getAntProject();
  try {
    System.setIn(originalIn);
    p.setInputHandler(new CommandLineInputHandler());
    p.setDefaultInputStream(originalIn);
  }
 catch (  NoSuchMethodError nsme) {
    for (    Method m : p.getClass().getMethods()) {
      if ("setDefaultInputStream".equals(m.getName()) && m.getParameterTypes().length == 1 && InputStream.class.equals(m.getParameterTypes()[0])) {
        try {
          m.invoke(p,originalIn);
          break;
        }
 catch (        Exception e) {
          throw new RuntimeException(e);
        }
      }
    }
  }
}
