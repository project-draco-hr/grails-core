{
  GrailsPlugin plugin=getGrailsPlugin(pluginName);
  if (plugin == null)   throw new PluginException("Plugin [" + pluginName + "] not found");
  String[] dependencyNames=plugin.getDependencyNames();
  for (int i=0; i < dependencyNames.length; i++) {
    String dn=dependencyNames[i];
    GrailsPlugin current=getGrailsPlugin(dn);
    current.doWithRuntimeConfiguration(springConfig);
  }
  String[] loadAfters=plugin.getLoadAfterNames();
  for (int i=0; i < loadAfters.length; i++) {
    String name=loadAfters[i];
    GrailsPlugin current=getGrailsPlugin(name);
    if (current != null) {
      current.doWithRuntimeConfiguration(springConfig);
    }
  }
  plugin.doWithRuntimeConfiguration(springConfig);
}
