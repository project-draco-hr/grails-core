{
  if (!configLocked) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("[GrailsAnnotationConfiguration] [" + domainClasses.size() + "] Grails domain classes to bind to persistence runtime");
    }
    DefaultGrailsDomainConfiguration.configureDomainBinder(grailsApplication,domainClasses);
    for (    GrailsDomainClass domainClass : domainClasses) {
      final String fullClassName=domainClass.getFullName();
      String hibernateConfig=fullClassName.replace('.','/') + ".hbm.xml";
      final ClassLoader loader=Thread.currentThread().getContextClassLoader();
      if (loader.getResource(hibernateConfig) != null)       continue;
      if (LOG.isDebugEnabled()) {
        LOG.debug("[GrailsAnnotationConfiguration] Binding persistent class [" + fullClassName + "]");
      }
      final Mappings mappings=super.createMappings();
      Mapping m=GrailsDomainBinder.getMapping(domainClass);
      mappings.setAutoImport(m == null || m.getAutoImport());
      GrailsDomainBinder.bindClass(domainClass,mappings);
    }
  }
  super.secondPassCompile();
  configLocked=true;
}
