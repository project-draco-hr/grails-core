{
  GrailsWebRequest webRequest=GrailsWebRequest.lookup();
  final boolean isFlowRequest=webRequest != null && webRequest.isFlowRequest();
  if (isFlowRequest) {
    webRequest.setAttribute(IS_FLOW_REQUEST_ATTRIBUTE,"true",WebRequest.SCOPE_REQUEST);
  }
 else {
    super.preHandle(request);
    SessionFactory sessionFactory=getSessionFactory();
    SessionHolder sessionHolder=(SessionHolder)TransactionSynchronizationManager.getResource(sessionFactory);
    Session session=sessionHolder.getSession();
    GrailsHibernateUtil.enableDynamicFilterEnablerIfPresent(sessionFactory,session);
  }
}
