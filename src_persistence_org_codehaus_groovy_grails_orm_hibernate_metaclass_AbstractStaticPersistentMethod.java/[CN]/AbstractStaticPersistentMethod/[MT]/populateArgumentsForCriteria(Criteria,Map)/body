{
  Integer maxParam=null;
  Integer offsetParam=null;
  if (argMap.containsKey(ARGUMENT_MAX)) {
    maxParam=(Integer)converter.convertIfNecessary(argMap.get(ARGUMENT_MAX),Integer.class);
  }
  if (argMap.containsKey(ARGUMENT_OFFSET)) {
    offsetParam=(Integer)converter.convertIfNecessary(argMap.get(ARGUMENT_OFFSET),Integer.class);
  }
  String orderParam=(String)argMap.get(ARGUMENT_ORDER);
  Object fetchObj=argMap.get(ARGUMENT_FETCH);
  if (fetchObj instanceof Map) {
    Map fetch=(Map)fetchObj;
    for (Iterator i=fetch.keySet().iterator(); i.hasNext(); ) {
      String associationName=(String)i.next();
      c.setFetchMode(associationName,getFetchMode(fetch.get(i)));
    }
  }
  final String sort=(String)argMap.get(ARGUMENT_SORT);
  final String order=ORDER_DESC.equalsIgnoreCase(orderParam) ? ORDER_DESC : ORDER_ASC;
  final int max=maxParam == null ? -1 : maxParam.intValue();
  final int offset=offsetParam == null ? -1 : offsetParam.intValue();
  if (max > -1)   c.setMaxResults(max);
  if (offset > -1)   c.setFirstResult(offset);
  if (sort != null) {
    boolean ignoreCase=true;
    Object caseArg=argMap.get(ARGUMENT_IGNORE_CASE);
    if (caseArg instanceof Boolean) {
      ignoreCase=((Boolean)caseArg).booleanValue();
    }
    if (ORDER_DESC.equals(order)) {
      c.addOrder(ignoreCase ? Order.desc(sort).ignoreCase() : Order.desc(sort));
    }
 else {
      c.addOrder(ignoreCase ? Order.asc(sort).ignoreCase() : Order.asc(sort));
    }
  }
}
