{
  try {
    cursorMove=0;
    if (!userInputActive) {
      userInputActive=true;
      try {
        return reader.readLine(prompt);
      }
  finally {
        userInputActive=false;
      }
    }
 else {
      out.print(prompt);
      return null;
    }
  }
 catch (  IOException e) {
    throw new RuntimeException("Error reading input: " + e.getMessage());
  }
}
