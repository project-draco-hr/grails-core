{
  UrlMappingsHolder holder=WebUtils.lookupUrlMappings(getServletContext());
  GrailsApplication application=WebUtils.lookupApplication(getServletContext());
  GrailsWebRequest webRequest=(GrailsWebRequest)request.getAttribute(GrailsApplicationAttributes.WEB_REQUEST);
  GrailsClass[] controllers=application.getArtefacts(ControllerArtefactHandler.TYPE);
  if (controllers == null || controllers.length == 0 || holder == null) {
    processFilterChain(request,response,filterChain);
    return;
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Executing URL mapping filter...");
    LOG.debug(holder);
  }
  String uri=urlHelper.getPathWithinApplication(request);
  UrlMappingInfo[] urlInfos=holder.matchAll(uri);
  WrappedResponseHolder.setWrappedResponse(response);
  boolean dispatched=false;
  try {
    for (int i=0; i < urlInfos.length; i++) {
      UrlMappingInfo info=urlInfos[i];
      if (info != null) {
        info.configure(webRequest);
        String action=info.getActionName() == null ? "" : info.getActionName();
        final String viewName=info.getViewName();
        if (viewName == null) {
          final String controllerName=info.getControllerName();
          GrailsClass controller=application.getArtefactForFeature(ControllerArtefactHandler.TYPE,org.codehaus.groovy.grails.web.util.WebUtils.SLASH + controllerName + org.codehaus.groovy.grails.web.util.WebUtils.SLASH+ action);
          if (controller == null) {
            continue;
          }
        }
        dispatched=true;
        if (viewName == null || viewName.endsWith(GSP_SUFFIX) || viewName.endsWith(JSP_SUFFIX)) {
          String forwardUrl=WebUtils.forwardRequestForUrlMappingInfo(request,response,info);
          if (LOG.isDebugEnabled()) {
            LOG.debug("Matched URI [" + uri + "] to URL mapping ["+ info+ "], forwarding to ["+ forwardUrl+ "] with response ["+ response.getClass()+ "]");
          }
        }
 else {
          ViewResolver viewResolver=WebUtils.lookupViewResolver(getServletContext());
          if (viewResolver != null) {
            View v;
            try {
              v=org.codehaus.groovy.grails.web.util.WebUtils.resolveView(request,info,viewName,viewResolver);
              v.render(Collections.EMPTY_MAP,request,response);
            }
 catch (            Exception e) {
              throw new UrlMappingException("Error mapping onto view [" + viewName + "]: "+ e.getMessage(),e);
            }
          }
        }
        break;
      }
    }
  }
  finally {
    WrappedResponseHolder.setWrappedResponse(null);
  }
  if (!dispatched) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("No match found, processing remaining filter chain.");
    }
    processFilterChain(request,response,filterChain);
  }
}
