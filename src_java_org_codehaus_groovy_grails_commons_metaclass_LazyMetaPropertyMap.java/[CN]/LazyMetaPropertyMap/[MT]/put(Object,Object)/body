{
  if (propertyName instanceof CharSequence)   propertyName=propertyName.toString();
  Object old=null;
  MetaProperty mp=metaClass.getMetaProperty((String)propertyName);
  if (mp != null) {
    old=mp.getProperty(instance);
    if (propertyValue instanceof GrailsParameterMap) {
      GrailsParameterMap gpm=(GrailsParameterMap)propertyValue;
      propertyValue=gpm.get(propertyName);
    }
    mp.setProperty(instance,propertyValue);
  }
  return old;
}
