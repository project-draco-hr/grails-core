{
  WebApplicationContext wac=WebApplicationContextUtils.getWebApplicationContext(getServletContext());
  WebApplicationContext webContext;
  this.application=(GrailsApplication)parent.getBean(GrailsApplication.APPLICATION_ID,GrailsApplication.class);
  if (wac instanceof GrailsApplicationContext) {
    webContext=wac;
  }
 else {
    webContext=GrailsConfigUtils.configureWebApplicationContext(getServletContext(),parent);
    GrailsConfigUtils.executeGrailsBootstraps(application,webContext,getServletContext());
  }
  initGrailsController(webContext);
  this.interceptors=establishInterceptors(webContext);
  return webContext;
}
