{
  Writer target=getOut();
  while (target instanceof GrailsPrintWriter) {
    GrailsPrintWriter gpr=((GrailsPrintWriter)target);
    if (gpr.isAllowUnwrappingOut()) {
      if (markUsed) {
        gpr.setUsed(true);
      }
      target=gpr.getOut();
    }
 else {
      break;
    }
  }
  if (target instanceof StreamCharBufferWriter) {
    return target;
  }
 else {
    return getOut();
  }
}
