{
  final Terminal t;
  String os=System.getProperty("os.name").toLowerCase();
  if (os.indexOf("windows") != -1) {
    t=new WindowsTerminal(){
      @Override public boolean isANSISupported(){
        return true;
      }
    }
;
  }
 else {
    t=new UnixTerminal();
  }
  try {
    t.initializeTerminal();
    return t;
  }
 catch (  Exception e) {
    e.printStackTrace();
    return new UnsupportedTerminal();
  }
}
