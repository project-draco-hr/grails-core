{
  LocaleContextHolder.setLocale(request.getLocale());
  GrailsWebRequest requestAttributes=new GrailsWebRequest(request,response,getServletContext());
  RequestContextHolder.setRequestAttributes(requestAttributes);
  if (logger.isDebugEnabled()) {
    logger.debug("Bound Grails request context to thread: " + request);
  }
  try {
    filterChain.doFilter(requestAttributes.getCurrentRequest(),requestAttributes.getCurrentResponse());
  }
  finally {
    requestAttributes.requestCompleted();
    RequestContextHolder.setRequestAttributes(null);
    LocaleContextHolder.setLocale(null);
    if (logger.isDebugEnabled()) {
      logger.debug("Cleared Grails thread-bound request context: " + request);
    }
  }
}
