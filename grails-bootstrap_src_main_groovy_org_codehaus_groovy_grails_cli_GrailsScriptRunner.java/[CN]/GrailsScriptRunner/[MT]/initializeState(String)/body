{
  scriptCacheDir=new File(settings.getProjectWorkDir(),"scriptCache");
  console=GrailsConsole.getInstance();
  boolean skipPlugins=scriptName != null && ("UninstallPlugin".equals(scriptName) || "InstallPlugin".equals(scriptName));
  console.updateStatus("Configuring classpath");
  ClasspathConfigurer configurer=new ClasspathConfigurer(pluginPathSupport,settings,skipPlugins);
  if ("DependencyReport".equals(scriptName) || "Upgrade".equals(scriptName) || "SetProxy".equals(scriptName)|| "AddProxy".equals(scriptName)) {
    configurer.setExitOnResolveError(false);
  }
  classLoader=configurer.configuredClassLoader();
  initializeLogging();
}
