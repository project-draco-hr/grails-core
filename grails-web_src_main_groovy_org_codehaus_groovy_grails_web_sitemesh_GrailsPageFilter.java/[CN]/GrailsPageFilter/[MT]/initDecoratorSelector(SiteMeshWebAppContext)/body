{
  final Factory factory=Factory.getInstance(new Config(filterConfig));
  factory.refresh();
  return new DecoratorMapper2DecoratorSelector(factory.getDecoratorMapper()){
    @Override public Decorator selectDecorator(    Content content,    final SiteMeshContext context){
      SiteMeshWebAppContext siteMeshWebAppContext=(SiteMeshWebAppContext)context;
      final com.opensymphony.module.sitemesh.Decorator decorator=factory.getDecoratorMapper().getDecorator(siteMeshWebAppContext.getRequest(),content2htmlPage(content));
      if (decorator == null || decorator.getPage() == null) {
        return new GrailsNoDecorator();
      }
      return new Decorator(){
        private void render(        @SuppressWarnings("hiding") Content content,        HttpServletRequest request,        HttpServletResponse response,        ServletContext servletContext){
          GroovyPageLayoutRenderer layoutRenderer=new GroovyPageLayoutRenderer(decorator,templateEngine,applicationContext);
          layoutRenderer.render(content,request,response,servletContext);
        }
        public void render(        @SuppressWarnings("hiding") Content content,        SiteMeshContext siteMeshContext){
          SiteMeshWebAppContext ctx=(SiteMeshWebAppContext)siteMeshContext;
          render(content,ctx.getRequest(),ctx.getResponse(),ctx.getServletContext());
        }
      }
;
    }
  }
;
}
