{
  String filename=className.replace('.',File.separatorChar) + ".groovy";
  URL dependentScript;
  try {
    dependentScript=context.getResource("/WEB-INF/groovy/" + filename);
    if (dependentScript == null) {
      String current=servletPath.substring(0,servletPath.lastIndexOf("/") + 1);
      dependentScript=context.getResource(current + filename);
    }
  }
 catch (  MalformedURLException e) {
    throw new ClassNotFoundException(className + ": " + e);
  }
  if (dependentScript == null) {
    throw new ClassNotFoundException("Could not find " + className + " in webapp");
  }
 else {
    URLConnection dependentScriptConn;
    try {
      dependentScriptConn=dependentScript.openConnection();
      dependencies.put(dependentScript,new Long(dependentScriptConn.getLastModified()));
    }
 catch (    IOException e1) {
      throw new ClassNotFoundException("Could not read " + className + ": "+ e1);
    }
    try {
      return parseClass(dependentScriptConn.getInputStream(),filename);
    }
 catch (    CompilationFailedException e2) {
      throw new ClassNotFoundException("Syntax error in " + className + ": "+ e2);
    }
catch (    IOException e2) {
      throw new ClassNotFoundException("Problem reading " + className + ": "+ e2);
    }
  }
}
