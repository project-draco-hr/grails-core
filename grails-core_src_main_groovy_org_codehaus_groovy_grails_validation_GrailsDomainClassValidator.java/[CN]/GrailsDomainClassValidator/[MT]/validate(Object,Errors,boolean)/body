{
  if (!domainClass.getClazz().isInstance(obj)) {
    throw new IllegalArgumentException("Argument [" + obj + "] is not an instance of ["+ domainClass.getClazz()+ "] which this validator is configured for");
  }
  BeanWrapper bean=new BeanWrapperImpl(obj);
  Map constrainedProperties=domainClass.getConstrainedProperties();
  Set<String> constrainedPropertyNames=new HashSet(constrainedProperties.keySet());
  GrailsDomainClassProperty[] persistentProperties=domainClass.getPersistentProperties();
  for (  GrailsDomainClassProperty persistentProperty : persistentProperties) {
    String propertyName=persistentProperty.getName();
    if (constrainedProperties.containsKey(propertyName)) {
      validatePropertyWithConstraint(propertyName,obj,errors,bean,constrainedProperties);
    }
    if ((persistentProperty.isAssociation() || persistentProperty.isEmbedded()) && cascade) {
      cascadeToAssociativeProperty(errors,bean,persistentProperty);
    }
    constrainedPropertyNames.remove(propertyName);
  }
  for (  String name : constrainedPropertyNames) {
    validatePropertyWithConstraint(name,obj,errors,bean,constrainedProperties);
  }
  if (obj instanceof GroovyObject) {
    ((GroovyObject)obj).setProperty(ERRORS_PROPERTY,errors);
  }
 else {
    InvokerHelper.setProperty(obj,ERRORS_PROPERTY,errors);
  }
  postValidate(obj,errors);
}
