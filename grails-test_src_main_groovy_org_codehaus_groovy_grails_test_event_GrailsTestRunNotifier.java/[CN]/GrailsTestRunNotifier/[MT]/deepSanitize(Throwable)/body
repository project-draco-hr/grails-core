{
  if (FULL_STACKTRACE) {
    return;
  }
  StackTraceElement[] stackTrace=exception.getStackTrace();
  List<StackTraceElement> newTrace=new ArrayList<StackTraceElement>();
  for (  StackTraceElement stackTraceElement : stackTrace) {
    if (stackTraceElement.getClassName().startsWith("org.junit")) {
      break;
    }
    newTrace.add(stackTraceElement);
  }
  if (newTrace.isEmpty()) {
    return;
  }
  StackTraceElement[] clean=new StackTraceElement[newTrace.size()];
  newTrace.toArray(clean);
  exception.setStackTrace(clean);
}
