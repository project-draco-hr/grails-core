{
  Mapping m=getMapping(entity.getMappedClass());
  SimpleValue d=new SimpleValue(mappings,table);
  entity.setDiscriminator(d);
  entity.setDiscriminatorValue(m != null && m.getDiscriminator() != null ? m.getDiscriminator() : entity.getClassName());
  if (m != null && m.getDiscriminatorMap().get("insert") != null) {
    entity.setDiscriminatorInsertable((Boolean)m.getDiscriminatorMap().get("insert"));
  }
  if (m != null && m.getDiscriminatorMap().get("type") != null) {
    d.setTypeName((String)m.getDiscriminatorMap().get("type"));
  }
  if (m != null && m.getDiscriminatorMap().get("formula") != null) {
    Formula formula=new Formula();
    formula.setFormula((String)m.getDiscriminatorMap().get("formula"));
    d.addFormula(formula);
  }
 else {
    bindSimpleValue(STRING_TYPE,d,false,RootClass.DEFAULT_DISCRIMINATOR_COLUMN_NAME,mappings);
    ColumnConfig cc=m == null ? null : m.getDiscriminatorColumn();
    if (cc != null) {
      Column c=(Column)d.getColumnIterator().next();
      if (cc.getName() != null) {
        c.setName(cc.getName());
      }
      bindColumnConfigToColumn(c,cc);
    }
  }
  entity.setPolymorphic(true);
}
