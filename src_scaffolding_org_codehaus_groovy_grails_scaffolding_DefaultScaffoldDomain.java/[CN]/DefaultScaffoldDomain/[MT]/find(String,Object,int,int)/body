{
  if (StringUtils.isBlank(by) || q == null)   return new ArrayList();
  if (this.bean.isReadableProperty(by)) {
    Class propertyType=this.bean.getPropertyType(by);
    if (!propertyType.isAssignableFrom(q.getClass())) {
      q=converter.convertValue(context,q,propertyType);
    }
    final Object query=q;
    if (q != null) {
      return this.template.executeFind(new HibernateCallback(){
        public Object doInHibernate(        Session session) throws HibernateException, SQLException {
          Criteria c=session.createCriteria(persistentClass);
          if (max > -1)           c.setMaxResults(max);
          if (offset > -1)           c.setFirstResult(offset);
          c.add(Restrictions.eq(by,query));
          return c.list();
        }
      }
);
    }
  }
  return new ArrayList();
}
