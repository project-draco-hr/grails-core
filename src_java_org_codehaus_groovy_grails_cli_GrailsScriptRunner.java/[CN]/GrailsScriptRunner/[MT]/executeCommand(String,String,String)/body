{
  if (settings.getRootLoader() == null) {
    settings.setRootLoader((URLClassLoader)GrailsScriptRunner.class.getClassLoader());
  }
  if (args != null) {
    String[] argArray=args.split("\\s+");
    Pattern pattern=Pattern.compile("^(?:-)?-non-interactive$");
    for (    String arg : argArray) {
      if (pattern.matcher(arg).matches()) {
        isInteractive=false;
        break;
      }
    }
    System.setProperty("grails.cli.args",args.replace(' ','\n'));
  }
 else {
    System.setProperty("grails.cli.args","");
  }
  try {
    System.setProperty("disable.grails.plugin.transform","true");
    settings.loadConfig();
  }
 catch (  Exception e) {
    e.printStackTrace(System.err);
    System.err.println("WARNING: There was an error loading the BuildConfig: " + e.getMessage());
    System.exit(1);
  }
 finally {
    System.setProperty("disable.grails.plugin.transform","false");
  }
  BuildSettingsHolder.setSettings(settings);
  if (scriptName.equalsIgnoreCase("interactive")) {
    if (!isInteractive) {
      out.println("You cannot use '--non-interactive' with interactive mode.");
      return 1;
    }
    setRunningEnvironment(scriptName,env);
    runInteractive();
    return 0;
  }
  return callPluginOrGrailsScript(scriptName,env);
}
