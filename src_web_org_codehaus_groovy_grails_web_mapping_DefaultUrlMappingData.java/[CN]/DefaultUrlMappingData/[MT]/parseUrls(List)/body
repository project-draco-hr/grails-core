{
  StringBuffer buf=new StringBuffer();
  for (int i=0; i < tokens.length; i++) {
    String token=tokens[i].trim();
    if (token.equals(SLASH))     continue;
    boolean isOptional=false;
    if (token.endsWith(QUESTION_MARK)) {
      urls.add(buf.toString());
      tokens[i]=token.substring(0,token.length() - 1);
      buf.append(SLASH).append(tokens[i]);
      isOptional=true;
    }
 else {
      buf.append(SLASH).append(token);
    }
    if (CAPTURED_WILDCARD.equals(tokens[i])) {
      if (isOptional) {
        optionalTokens.add(Boolean.TRUE);
      }
 else {
        optionalTokens.add(Boolean.FALSE);
      }
    }
  }
  urls.add(buf.toString());
  Collections.reverse(urls);
}
