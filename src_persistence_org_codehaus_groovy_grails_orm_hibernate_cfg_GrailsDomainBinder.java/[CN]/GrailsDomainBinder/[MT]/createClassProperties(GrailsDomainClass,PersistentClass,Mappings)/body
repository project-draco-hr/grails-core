{
  GrailsDomainClassProperty[] persistantProperties=domainClass.getPersistantProperties();
  Table table=persistentClass.getTable();
  for (int i=0; i < persistantProperties.length; i++) {
    GrailsDomainClassProperty currentGrailsProp=persistantProperties[i];
    if (currentGrailsProp.isInherited())     continue;
    if (currentGrailsProp.isManyToMany()) {
      throw new MappingException("Many-to-many relationships are currently not supported by Grails, but one found: " + currentGrailsProp.getName());
    }
    if (LOG.isTraceEnabled())     LOG.trace("[GrailsDomainBinder] Binding persistent property [" + currentGrailsProp.getName() + "]");
    Value value=null;
    CollectionType collectionType=CollectionType.collectionTypeForClass(currentGrailsProp.getType());
    if (collectionType != null) {
      Collection collection=collectionType.create(currentGrailsProp,persistentClass,mappings);
      mappings.addCollection(collection);
      value=collection;
    }
 else     if (currentGrailsProp.isManyToOne()) {
      value=new ManyToOne(table);
      bindManyToOne(currentGrailsProp,(ManyToOne)value,mappings);
    }
 else     if (currentGrailsProp.isOneToOne()) {
      value=new ManyToOne(table);
      bindManyToOne(currentGrailsProp,(ManyToOne)value,mappings);
    }
 else {
      value=new SimpleValue(table);
      bindSimpleValue(persistantProperties[i],(SimpleValue)value,mappings);
    }
    if (value != null) {
      Property property=createProperty(value,persistentClass,persistantProperties[i],mappings);
      persistentClass.addProperty(property);
    }
  }
}
