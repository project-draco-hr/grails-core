{
  String output=parseCode("myTest2","<g:message code=\"[\"/>").generatedGsp;
  String expected=makeImports() + "\n" + "class myTest2 extends GroovyPage {\n"+ "public String getGroovyPageFileName() { \"myTest2\" }\n"+ "public Object run() {\n"+ "def params = binding.params\n"+ "def request = binding.request\n"+ "def flash = binding.flash\n"+ "def response = binding.response\n"+ "def out = binding.out\n"+ "def codecOut = binding.codecOut\n"+ "registerSitemeshPreprocessMode(request)\n"+ "invokeTag('message','g',1,['code':evaluate('\"[\"', 1, it) { return \"[\" }] as GroovyPageAttributes,null)\n"+ "}\n"+ GSP_FOOTER;
  assertEquals(trimAndRemoveCR(expected),trimAndRemoveCR(output));
}
