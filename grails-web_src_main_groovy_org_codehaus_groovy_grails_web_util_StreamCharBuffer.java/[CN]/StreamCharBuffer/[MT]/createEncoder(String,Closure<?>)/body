{
  return new Encoder(){
    public String getCodecName(){
      return codecName;
    }
    public CharSequence encode(    Object o){
      return (CharSequence)encodeClosure.call(o);
    }
    public void markEncoded(    CharSequence string){
      GrailsWebRequest webRequest=GrailsWebRequest.lookup();
      if (webRequest != null) {
        webRequest.registerEncodedWith(getCodecName(),string);
      }
    }
  }
;
}
