{
  ApplicationContext applicationContext=getStaticApplicationContext();
  if (applicationContext == null) {
    return;
  }
  applicationContext.getAutowireCapableBeanFactory().autowireBeanProperties(instance,AutowireCapableBeanFactory.AUTOWIRE_BY_NAME,false);
  if (Environment.getCurrent() == Environment.TEST) {
    GrailsWebRequest webRequest=GrailsWebRequest.lookup();
    if (webRequest != null) {
      String className=instance.getClass().getName().replaceAll("\\$\\$.*$","");
      webRequest.setControllerName(GrailsNameUtils.getLogicalPropertyName(className,ControllerArtefactHandler.TYPE));
    }
  }
}
