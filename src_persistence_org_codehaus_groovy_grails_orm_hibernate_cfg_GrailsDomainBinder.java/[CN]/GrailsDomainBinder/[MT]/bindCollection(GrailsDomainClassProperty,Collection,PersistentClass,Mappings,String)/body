{
  String propertyName=getNameForPropertyAndPath(property,path);
  collection.setRole(StringHelper.qualify(property.getDomainClass().getFullName(),propertyName));
  PropertyConfig pc=getPropertyConfig(property);
  if (property.getFetchMode() == GrailsDomainClassProperty.FETCH_EAGER) {
    collection.setFetchMode(FetchMode.JOIN);
  }
 else   if (pc != null && pc.getFetch() != null) {
    collection.setFetchMode(pc.getFetch());
  }
 else {
    collection.setFetchMode(FetchMode.DEFAULT);
  }
  if (shouldBindCollectionWithForeignKey(property)) {
    OneToMany oneToMany=new OneToMany(collection.getOwner());
    collection.setElement(oneToMany);
    bindOneToMany(property,oneToMany,mappings);
  }
 else {
    bindCollectionTable(property,mappings,collection);
    if (!property.isOwningSide()) {
      collection.setInverse(true);
    }
  }
  if (pc != null && !StringUtils.isBlank(pc.getSort())) {
    collection.setOrderBy(pc.getSort());
  }
  if (pc != null && pc.getBatchSize() != null) {
    collection.setBatchSize(pc.getBatchSize().intValue());
  }
  if (collection instanceof org.hibernate.mapping.Set) {
    mappings.addSecondPass(new GrailsCollectionSecondPass(property,mappings,collection));
  }
 else   if (collection instanceof org.hibernate.mapping.List) {
    mappings.addSecondPass(new ListSecondPass(property,mappings,collection));
  }
 else   if (collection instanceof org.hibernate.mapping.Map) {
    mappings.addSecondPass(new MapSecondPass(property,mappings,collection));
  }
}
