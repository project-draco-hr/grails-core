{
  GroovyClassLoader gcl=new GroovyClassLoader();
  Class dc=gcl.parseClass("class Test { Long id; Long version; }");
  GrailsApplication app=new DefaultGrailsApplication(new Class[0],gcl);
  MockApplicationContext parent=new MockApplicationContext();
  parent.registerMockBean(GrailsApplication.APPLICATION_ID,app);
  parent.registerMockBean(PluginMetaManager.BEAN_ID,new DefaultPluginMetaManager(new Resource[0]));
  GrailsRuntimeConfigurator conf=new GrailsRuntimeConfigurator(app,parent);
  GrailsWebApplicationContext ctx=(GrailsWebApplicationContext)conf.configure(new MockServletContext());
  assertNotNull(ctx);
  ctx.registerSingleton("Test",dc);
  GroovyObject testInstance=(GroovyObject)ctx.getBean("Test");
  assertNotNull(testInstance);
  gcl=new GroovyClassLoader();
  dc=gcl.parseClass("class Test { Long id; Long version;String updatedProp = 'hello'; }");
  ctx.removeBeanDefinition("Test");
  ctx.registerSingleton("Test",dc);
  testInstance=(GroovyObject)ctx.getBean("Test");
  assertNotNull(testInstance);
  assertEquals("hello",testInstance.getProperty("updatedProp"));
}
