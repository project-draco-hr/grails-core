{
  if (StringUtils.isBlank(controller)) {
    throw new JspTagException("Tag link missing required attribute 'controller'");
  }
  Writer out=super.pageContext.getOut();
  Map attributes=new HashMap();
  attributes.putAll(this.dyanmicAttributes);
  attributes.put(LinkTagHandler.ATTRIBUTE_CONTROLLER,controller);
  if (!StringUtils.isBlank(action)) {
    attributes.put(LinkTagHandler.ATTRIBUTE_ACTION,action);
  }
  if (!StringUtils.isBlank(id)) {
    Object evalId;
    if (ExpressionEvaluationUtils.isExpressionLanguage(id)) {
      evalId=ExpressionEvaluationUtils.evaluate("id",id,Object.class,pageContext);
    }
 else {
      evalId=pageContext.findAttribute(id);
      if (evalId == null)       evalId=id;
    }
    attributes.put(LinkTagHandler.ATTRIBUTE_ID,evalId);
  }
  try {
    GrailsTagHandler tagHandler=new LinkTagHandler((HttpServletRequest)pageContext.getRequest(),pageContext.getOut(),attributes);
    tagHandler.doTag();
  }
 catch (  IOException e) {
    throw new JspTagException(e.getMessage(),e);
  }
  return EVAL_BODY_BUFFERED;
}
