{
  System.setProperty("org.mortbay.xml.XmlParser.NotValidating","true");
  Server server=new Server();
  try {
    Connector[] connectors=new Connector[]{new SelectChannelConnector()};
    String port=System.getProperty("server.port");
    if (StringUtils.isBlank(port)) {
      connectors[0].setPort(8080);
    }
 else {
      connectors[0].setPort(Integer.parseInt(port));
    }
    String basedir=System.getProperty("base.dir");
    server.setConnectors(connectors);
    String name;
    String location;
    if (StringUtils.isBlank(basedir)) {
      File current=new File(".");
      name='/' + current.getParentFile().getName();
      location=GrailsMain.TMP_WAR_LOCATION;
    }
 else {
      File base=new File(basedir);
      name='/' + base.getName();
      location=basedir + File.separator + TMP_WAR_LOCATION;
    }
    ContextHandler handler=new WebAppContext(location,name);
    handler.setClassLoader(Thread.currentThread().getContextClassLoader());
    server.setHandler(handler);
    System.out.println("Starting Grails Jetty server for location: " + location);
    server.start();
    System.out.println("Grails Jetty Server Started...");
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
