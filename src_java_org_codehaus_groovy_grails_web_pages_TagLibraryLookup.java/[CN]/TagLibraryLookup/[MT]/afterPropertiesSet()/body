{
  if (grailsApplication != null && applicationContext != null) {
    GrailsClass[] taglibs=grailsApplication.getArtefacts(TagLibArtefactHandler.TYPE);
    for (    GrailsClass grailsClass : taglibs) {
      registerTagLib((GrailsTagLibClass)grailsClass);
    }
    namespaceDispatchers.put(GroovyPage.TEMPLATE_NAMESPACE,new NamespacedTagDispatcher(GroovyPage.DEFAULT_NAMESPACE,GroovyPage.class,grailsApplication,applicationContext){
      @Override public Object invokeMethod(      final String name,      Object args){
        Map attrs=new HashMap(){
{
            put("template",name);
          }
        }
;
        if (args != null && args instanceof Object[]) {
          Object[] tagArgs=((Object[])args);
          if (tagArgs.length > 0 && tagArgs[0] instanceof Map) {
            attrs.put("model",tagArgs[0]);
          }
        }
        return super.invokeMethod("render",new Object[]{attrs});
      }
    }
);
  }
}
