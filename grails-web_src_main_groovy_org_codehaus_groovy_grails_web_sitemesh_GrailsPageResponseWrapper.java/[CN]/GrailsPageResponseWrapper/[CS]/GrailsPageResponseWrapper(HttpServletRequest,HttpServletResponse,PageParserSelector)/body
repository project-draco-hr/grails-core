{
  super(response);
  this.parserSelector=parserSelector;
  routablePrintWriter=new GrailsRoutablePrintWriter(new GrailsRoutablePrintWriter.DestinationFactory(){
    public PrintWriter activateDestination() throws IOException {
      return response.getWriter();
    }
  }
);
  routableServletOutputStream=new RoutableServletOutputStream(new RoutableServletOutputStream.DestinationFactory(){
    public ServletOutputStream create() throws IOException {
      return response.getOutputStream();
    }
  }
);
  this.request=request;
  gspSitemeshPage=(GSPSitemeshPage)request.getAttribute(GrailsPageFilter.GSP_SITEMESH_PAGE);
}
