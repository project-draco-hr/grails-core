{
  GrailsDomainClass[] grailsDomainClasses=application.getGrailsDomainClasses();
  for (int i=0; i < grailsDomainClasses.length; i++) {
    GrailsDomainClass grailsDomainClass=grailsDomainClasses[i];
    Bean domainClassBean=SpringConfigUtils.createSingletonBean(MethodInvokingFactoryBean.class);
    domainClassBean.setProperty("targetObject",SpringConfigUtils.createBeanReference("grailsApplication"));
    domainClassBean.setProperty("targetMethod",SpringConfigUtils.createLiteralValue("getGrailsDomainClass"));
    domainClassBean.setProperty("arguments",SpringConfigUtils.createLiteralValue(grailsDomainClass.getFullName()));
    beanReferences.add(SpringConfigUtils.createBeanReference(grailsDomainClass.getFullName() + "DomainClass",domainClassBean));
    Bean persistentClassBean=SpringConfigUtils.createSingletonBean(MethodInvokingFactoryBean.class);
    persistentClassBean.setProperty("targetObject",SpringConfigUtils.createBeanReference(grailsDomainClass.getFullName() + "DomainClass"));
    persistentClassBean.setProperty("targetMethod",SpringConfigUtils.createLiteralValue("getClazz"));
    beanReferences.add(SpringConfigUtils.createBeanReference(grailsDomainClass.getFullName() + "PersistentClass",persistentClassBean));
    Bean validatorBean=SpringConfigUtils.createSingletonBean(GrailsDomainClassValidator.class);
    validatorBean.setProperty("domainClass",SpringConfigUtils.createBeanReference(grailsDomainClass.getFullName() + "DomainClass"));
    validatorBean.setProperty("sessionFactory",SpringConfigUtils.createBeanReference("sessionFactory"));
    beanReferences.add(SpringConfigUtils.createBeanReference(grailsDomainClass.getFullName() + "Validator",validatorBean));
  }
}
