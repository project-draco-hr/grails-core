{
  ScriptAndArgs info=new ScriptAndArgs();
  int currentParamIndex=0;
  if (Environment.isSystemSet()) {
    info.env=Environment.getCurrent().getName();
  }
 else   if (isEnvironmentArgs(arguments.get(currentParamIndex))) {
    String env=arguments.get(currentParamIndex++);
    info.env=ENV_ARGS.get(env);
  }
  abortIfOutOfBounds(arguments,currentParamIndex);
  String paramName=arguments.get(currentParamIndex++);
  if (paramName.charAt(0) == '-') {
    paramName=paramName.substring(1);
  }
  info.inputName=paramName;
  info.name=GrailsNameUtils.getNameFromScript(paramName);
  if (currentParamIndex < arguments.size()) {
    StringBuilder b=new StringBuilder(arguments.get(currentParamIndex));
    for (int i=currentParamIndex + 1, count=arguments.size(); i < count; i++) {
      b.append(' ').append(arguments.get(i));
    }
    info.args=b.toString();
  }
  return info;
}
