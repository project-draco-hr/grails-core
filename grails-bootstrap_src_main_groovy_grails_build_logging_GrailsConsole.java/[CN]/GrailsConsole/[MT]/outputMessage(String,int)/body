{
  if (msg == null || msg.trim().length() == 0)   return;
  try {
    if (hasNewLines(msg)) {
      printMessageOnNewLine(msg);
      lastMessage="";
    }
 else {
      if (isAnsiEnabled()) {
        lastStatus=outputCategory(erasePreviousLine(CATEGORY_SEPARATOR),CATEGORY_SEPARATOR).fg(Color.DEFAULT).a(msg).reset();
        out.println(lastStatus);
        cursorMove=replaceCount;
      }
 else {
        if (lastMessage != null && lastMessage.equals(msg))         return;
        if (progressIndicatorActive) {
          out.println();
        }
        out.println(CATEGORY_SEPARATOR + msg);
      }
      lastMessage=msg;
    }
  }
  finally {
    postPrintMessage();
  }
}
