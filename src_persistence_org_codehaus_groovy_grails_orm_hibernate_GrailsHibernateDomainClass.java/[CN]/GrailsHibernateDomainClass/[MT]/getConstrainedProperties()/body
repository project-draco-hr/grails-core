{
  if (getReference().isReadableProperty(GrailsDomainClassProperty.CONSTRAINTS)) {
    List constraintsList=(List)getPropertyValue(GrailsDomainClassProperty.CONSTRAINTS,List.class);
    if (constraintsList != null) {
      Map constraintsMap=new HashMap();
      for (Iterator i=constraintsList.iterator(); i.hasNext(); ) {
        ConstrainedProperty cp=(ConstrainedProperty)i.next();
        constraintsMap.put(cp.getPropertyName(),cp);
      }
      return constraintsMap;
    }
 else {
      Map constraintsMap=(Map)getPropertyValue(GrailsDomainClassProperty.CONSTRAINTS,Map.class);
      if (constraintsMap == null) {
        return Collections.EMPTY_MAP;
      }
 else {
        return constraintsMap;
      }
    }
  }
  return Collections.EMPTY_MAP;
}
