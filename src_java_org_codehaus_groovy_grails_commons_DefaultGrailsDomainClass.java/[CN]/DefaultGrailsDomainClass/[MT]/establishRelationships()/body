{
  for (  Object o : this.propertyMap.values()) {
    DefaultGrailsDomainClassProperty currentProp=(DefaultGrailsDomainClassProperty)o;
    if (!currentProp.isPersistent())     continue;
    Class currentPropType=currentProp.getType();
    if (Collection.class.isAssignableFrom(currentPropType) || Map.class.isAssignableFrom(currentPropType)) {
      establishRelationshipForCollection(currentProp);
    }
 else     if (DomainClassArtefactHandler.isDomainClass(currentPropType) && currentProp.isPersistent()) {
      establishDomainClassRelationship(currentProp);
    }
 else     if (embedded.contains(currentProp.getName())) {
      establishDomainClassRelationship(currentProp);
    }
  }
}
