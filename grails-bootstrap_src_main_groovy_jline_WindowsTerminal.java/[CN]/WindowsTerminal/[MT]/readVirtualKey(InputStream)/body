{
  int indicator=readCharacter(in);
  if (indicator == SPECIAL_KEY_INDICATOR || indicator == NUMPAD_KEY_INDICATOR) {
    int key=readCharacter(in);
switch (key) {
case UP_ARROW_KEY:
      return CTRL_P;
case LEFT_ARROW_KEY:
    return CTRL_B;
case RIGHT_ARROW_KEY:
  return CTRL_F;
case DOWN_ARROW_KEY:
return CTRL_N;
case DELETE_KEY:
return CTRL_QM;
case HOME_KEY:
return CTRL_A;
case END_KEY:
return CTRL_E;
case PAGE_UP_KEY:
return CTRL_K;
case PAGE_DOWN_KEY:
return CTRL_L;
case ESCAPE_KEY:
return CTRL_OB;
case INSERT_KEY:
return CTRL_C;
default :
return 0;
}
}
 else if (indicator > 128) {
replayStream.setInput(indicator,in);
indicator=replayReader.read();
}
return indicator;
}
