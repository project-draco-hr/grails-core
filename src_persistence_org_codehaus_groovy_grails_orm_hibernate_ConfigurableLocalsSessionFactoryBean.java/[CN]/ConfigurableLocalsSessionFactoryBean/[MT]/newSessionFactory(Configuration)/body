{
  SessionFactory sessionFactory=super.newSessionFactory(config);
  Collection classMetaData=sessionFactory.getAllClassMetadata().values();
  for (Iterator i=classMetaData.iterator(); i.hasNext(); ) {
    ClassMetadata cmd=(ClassMetadata)i.next();
    Class persistentClass=cmd.getMappedClass(EntityMode.POJO);
    if (this.grailsApplication.getGrailsDomainClass(persistentClass.getName()) == null) {
      LOG.info("[LocalsSessionFactoryBean] Registering dynamic methods on externally configured hibernate persistent class [" + persistentClass + "]");
      try {
        new DomainClassMethods(this.grailsApplication,persistentClass,sessionFactory,this.grailsApplication.getClassLoader());
      }
 catch (      IntrospectionException e) {
        LOG.warn("[LocalsSessionFactoryBean] Introspection exception registering dynamic methods for [" + persistentClass + "]:"+ e.getMessage(),e);
      }
    }
  }
  return sessionFactory;
}
