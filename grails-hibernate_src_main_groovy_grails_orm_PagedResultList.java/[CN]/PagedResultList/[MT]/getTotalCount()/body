{
  if (totalCount == Integer.MIN_VALUE) {
    totalCount=(Integer)hibernateTemplate.execute(new HibernateCallback<Object>(){
      public Object doInHibernate(      Session session) throws HibernateException, SQLException {
        hibernateTemplate.applySettings(criteria);
        criteria.setFirstResult(0);
        criteria.setProjection(Projections.rowCount());
        return ((Number)criteria.uniqueResult()).intValue();
      }
    }
);
  }
  return totalCount;
}
