{
  final Set<FieldNode> fieldsToConstrain=new HashSet<FieldNode>();
  List<FieldNode> allFields=classNode.getFields();
  for (  final FieldNode field : allFields) {
    if (!field.isStatic()) {
      fieldsToConstrain.add(field);
    }
  }
  final ClassNode superClass=classNode.getSuperClass();
  if (!superClass.equals(new ClassNode(Object.class))) {
    fieldsToConstrain.addAll(getFieldsToEnsureConstraintsFor(superClass));
  }
  return fieldsToConstrain;
}
