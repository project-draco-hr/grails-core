{
  progressIndicatorActive=true;
  String currMsg=lastMessage;
  try {
    int percentage=Math.round(NumberMath.multiply(NumberMath.divide(number,total),100).floatValue());
    if (!isAnsiEnabled()) {
      out.print("..");
      out.print(percentage + '%');
    }
 else {
      String message=new StringBuilder(currMsg).append(' ').append(percentage).append('%').toString();
      updateStatus(message);
    }
  }
  finally {
    lastMessage=currMsg;
  }
}
