{
  List<GrailsPlugin> grailsCorePlugins=loadCorePlugins ? findCorePlugins() : new ArrayList<GrailsPlugin>();
  List<GrailsPlugin> grailsUserPlugins=findUserPlugins(gcl);
  List<GrailsPlugin> allPlugins=new ArrayList<GrailsPlugin>(grailsCorePlugins);
  allPlugins.addAll(grailsUserPlugins);
  List<GrailsPlugin> filteredPlugins=getPluginFilter().filterPluginList(allPlugins);
  List<GrailsPlugin> orderedCorePlugins=new ArrayList<GrailsPlugin>();
  List<GrailsPlugin> orderedUserPlugins=new ArrayList<GrailsPlugin>();
  for (Iterator iter=filteredPlugins.iterator(); iter.hasNext(); ) {
    GrailsPlugin plugin=(GrailsPlugin)iter.next();
    if (grailsCorePlugins.contains(plugin)) {
      orderedCorePlugins.add(plugin);
    }
 else {
      orderedUserPlugins.add(plugin);
    }
  }
  List<GrailsPlugin> orderedPlugins=new ArrayList<GrailsPlugin>();
  orderedPlugins.addAll(orderedCorePlugins);
  orderedPlugins.addAll(orderedUserPlugins);
  for (Iterator iter=orderedPlugins.iterator(); iter.hasNext(); ) {
    GrailsPlugin plugin=(GrailsPlugin)iter.next();
    attemptPluginLoad(plugin);
  }
}
