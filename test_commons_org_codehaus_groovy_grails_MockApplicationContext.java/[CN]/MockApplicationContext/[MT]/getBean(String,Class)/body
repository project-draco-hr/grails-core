{
  if (!beans.containsKey(name))   throw new NoSuchBeanDefinitionException("No bean found for name " + name);
  if (beans.get(name).getClass() != requiredType)   throw new NoSuchBeanDefinitionException("No bean found for name " + name);
  return beans.get(name);
}
