{
  if (this.grailsApplication != null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("[GrailsAnnotationConfiguration] Setting context class loader to Grails GroovyClassLoader");
    }
    Thread.currentThread().setContextClassLoader(this.grailsApplication.getClassLoader());
  }
  SessionFactory sessionFactory=super.buildSessionFactory();
  if (grailsApplication != null)   GrailsHibernateUtil.configureHibernateDomainClasses(sessionFactory,grailsApplication);
  return sessionFactory;
}
