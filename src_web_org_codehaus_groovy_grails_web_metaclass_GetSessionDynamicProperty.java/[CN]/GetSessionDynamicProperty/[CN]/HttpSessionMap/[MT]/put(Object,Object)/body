{
  if (!(key instanceof String))   throw new IllegalArgumentException("The 'session' property key '" + key + "' must be a string value");
  if (session == null || session.isNew())   session=request.getSession();
  session.setAttribute((String)key,value);
  return value;
}
