{
  StringWriter sw=new StringWriter();
  out=new GSPWriter(sw,this);
  page();
  finalPass=true;
  scan.reset();
  page();
  InputStream in=new ByteArrayInputStream(sw.toString().getBytes());
  if (LOG.isDebugEnabled()) {
    LOG.debug("Compiled GSP into Groovy code: " + sw.toString());
  }
  scan=null;
  return in;
}
