{
  this.grailsApplication=app;
  if (app == null) {
    this.cl=new GroovyClassLoader();
  }
 else {
    this.cl=app.getClassLoader();
  }
  for (int i=0; resources != null && i < resources.length; i++) {
    try {
      cl.parseClass(resources[i].getFile());
    }
 catch (    CompilationFailedException e) {
      throw new org.codehaus.groovy.grails.exceptions.CompilationFailedException("Compilation error in file [" + resources[i].getFilename() + "]: "+ e.getMessage(),e);
    }
  }
  Class[] classes=cl.getLoadedClasses();
  this.domainMap=new HashMap();
  for (int i=0; i < classes.length; i++) {
    if (!GrailsClassUtils.isController(this.grailsApplication,classes[i]) && !Closure.class.isAssignableFrom(classes[i])) {
      GrailsDomainClass grailsDomainClass=new DefaultGrailsDomainClass(classes[i]);
      this.domainMap.put(grailsDomainClass.getName().substring(0,1).toLowerCase() + grailsDomainClass.getName().substring(1),grailsDomainClass);
    }
  }
  this.grailsDomainClasses=((GrailsDomainClass[])domainMap.values().toArray(new GrailsDomainClass[domainMap.size()]));
}
