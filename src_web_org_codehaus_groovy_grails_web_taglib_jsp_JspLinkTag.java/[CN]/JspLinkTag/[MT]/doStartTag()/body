{
  if (StringUtils.isBlank(controller)) {
    throw new JspTagException("Tag link missing required attribute 'controller'");
  }
  Writer out=super.pageContext.getOut();
  Map attributes=new HashMap();
  attributes.putAll(this.dyanmicAttributes);
  attributes.put(LinkTag.ATTRIBUTE_CONTROLLER,controller);
  if (!StringUtils.isBlank(action)) {
    attributes.put(LinkTag.ATTRIBUTE_ACTION,action);
  }
  if (!StringUtils.isBlank(id)) {
    Object evalId;
    if (ExpressionEvaluationUtils.isExpressionLanguage(id)) {
      evalId=ExpressionEvaluationUtils.evaluate("id",id,Object.class,pageContext);
    }
 else {
      evalId=pageContext.findAttribute(id);
      if (evalId == null)       evalId=id;
    }
    attributes.put(LinkTag.ATTRIBUTE_ID,evalId);
  }
  try {
    GrailsTagRegistry tagRegistry=GrailsTagRegistry.getInstance();
    this.tag=tagRegistry.loadTag(LinkTag.TAG_NAME,(HttpServletRequest)pageContext.getRequest(),(HttpServletResponse)pageContext.getResponse());
    this.tag.setAttributes(attributes);
    tag.doStartTag();
  }
 catch (  IOException e) {
    throw new JspTagException(e.getMessage(),e);
  }
  return EVAL_BODY_BUFFERED;
}
