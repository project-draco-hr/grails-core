{
  Writer target=getOut();
  while (target instanceof GrailsPrintWriter) {
    GrailsPrintWriter gpr=((GrailsPrintWriter)target);
    if (markUsed) {
      gpr.setUsed(true);
    }
    target=gpr.getOut();
  }
  if (target instanceof StreamCharBufferWriter) {
    return target;
  }
 else {
    return getOut();
  }
}
