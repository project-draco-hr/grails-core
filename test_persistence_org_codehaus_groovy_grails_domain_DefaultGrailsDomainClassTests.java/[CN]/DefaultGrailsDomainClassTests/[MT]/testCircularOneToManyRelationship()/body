{
  GroovyClassLoader gcl=new GroovyClassLoader();
  Class a=gcl.parseClass("class A { \n" + "@Property Long id\n" + "@Property Long version\n"+ "@Property relatesToMany = [ children : A]\n"+ "@Property A parent\n"+ "@Property Set children\n"+ "}");
  GrailsDomainClass dc=new DefaultGrailsDomainClass(a);
  GrailsDomainClass[] dcs=new GrailsDomainClass[1];
  dcs[0]=dc;
  Map domainMap=new HashMap();
  domainMap.put(dc.getFullName(),dc);
  GrailsDomainConfigurationUtil.configureDomainClassRelationships(dcs,domainMap);
  assertTrue(dc.getPropertyByName("children").isAssociation());
  assertTrue(dc.getPropertyByName("children").isOneToMany());
  assertTrue(dc.getPropertyByName("parent").isAssociation());
  assertTrue(dc.getPropertyByName("parent").isManyToOne());
  assertTrue(dc.getPropertyByName("children").getOtherSide().equals(dc.getPropertyByName("parent")));
  assertTrue(dc.getPropertyByName("parent").getOtherSide().equals(dc.getPropertyByName("children")));
}
