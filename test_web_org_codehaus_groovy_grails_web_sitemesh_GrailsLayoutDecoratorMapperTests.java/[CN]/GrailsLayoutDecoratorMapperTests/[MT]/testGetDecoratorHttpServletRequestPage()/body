{
  GrailsWebRequest webRequest=GrailsWebUtil.bindMockWebRequest();
  MockApplicationContext appCtx=new MockApplicationContext();
  appCtx.registerMockResource("WEB-INF/grails-app/views/layouts/test.gsp","<html><body><g:layoutBody /></body></html>");
  webRequest.getServletContext().setAttribute(GrailsApplicationAttributes.APPLICATION_CONTEXT,appCtx);
  MockHttpServletRequest request=new MockHttpServletRequest("GET","orders/list");
  MockServletContext context=new MockServletContext();
  GrailsLayoutDecoratorMapper m=new GrailsLayoutDecoratorMapper();
  Config c=new Config(new MockServletConfig(context));
  m.init(c,null,null);
  HTMLPageParser parser=new HTMLPageParser();
  String html="<html><head><title>Test title</title><meta name=\"layout\" content=\"test\"></meta></head><body>here is the body</body></html>";
  Page page=parser.parse(html.toCharArray());
  Decorator d=m.getDecorator(request,page);
  assertNotNull(d);
  assertEquals("/WEB-INF/grails-app/views/layouts/test.gsp",d.getURIPath());
  assertEquals("test",d.getName());
}
