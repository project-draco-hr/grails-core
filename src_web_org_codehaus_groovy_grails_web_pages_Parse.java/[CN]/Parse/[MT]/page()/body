{
  if (DEBUG)   System.out.println("parse: page");
  if (finalPass) {
    buf.append("\nclass ");
    buf.append(className);
    buf.append(" extends GroovyPage {\n");
    buf.append("public Object run() {\n");
  }
 else {
    buf.append("import org.codehaus.groovy.grails.web.pages.GroovyPage\n");
    buf.append("import org.codehaus.groovy.grails.web.taglib.*\n");
  }
  loop:   for (; ; ) {
    int state=scan.nextToken();
switch (state) {
case EOF:
      break loop;
case HTML:
    html();
  break;
case JEXPR:
expr();
break;
case JSCRIPT:
script(false);
break;
case JDIRECT:
direct();
break;
case JDECLAR:
declare(false);
break;
case GEXPR:
expr();
break;
case GSCRIPT:
script(true);
break;
case GDIRECT:
direct();
break;
case GDECLAR:
declare(true);
break;
case GSTART_TAG:
startTag();
break;
case GEND_TAG:
endTag();
break;
}
}
if (finalPass) {
buf.append("}\n}\n");
}
}
