{
  return getHibernateTemplate().execute(new HibernateCallback<Object>(){
    public Object doInHibernate(    Session session) throws HibernateException, SQLException {
      session.save(target);
      if (shouldFlush) {
        try {
          getHibernateTemplate().flush();
        }
 catch (        DataAccessException e) {
          getHibernateTemplate().setFlushMode(HibernateTemplate.FLUSH_NEVER);
          throw e;
        }
      }
      return target;
    }
  }
);
}
