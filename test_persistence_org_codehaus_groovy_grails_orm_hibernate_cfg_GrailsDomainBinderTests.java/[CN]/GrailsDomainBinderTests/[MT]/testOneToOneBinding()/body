{
  GroovyClassLoader cl=new GroovyClassLoader();
  cl.parseClass("class Species {\n" + "    Long id \n" + "    Long version \n"+ "    String name \n"+ "} \n"+ "class Pet {\n"+ "    Long id \n"+ "    Long version \n"+ "    Species species \n"+ "}");
  DefaultGrailsDomainConfiguration config=getDomainConfig(cl,cl.getLoadedClasses());
  PersistentClass petClass=config.getClassMapping("Pet");
  Iterator fks=petClass.getTable().getForeignKeyIterator();
  assertTrue("PET table has a FK",fks.hasNext());
  if (fks.hasNext()) {
    ForeignKey fk=(ForeignKey)fks.next();
    assertEquals("FK references table","species",fk.getReferencedTable().getName());
  }
}
