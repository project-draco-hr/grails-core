{
  int writtenCount=0;
  while (charsUnread() > 0) {
    if (prepareChildArrayChunkReading()) {
      writtenCount+=readingStringChunkGroup.writeTo(target);
      if (readingStringChunkGroup.getUnreadChars() == 0) {
        readingStringChunkGroup=null;
      }
    }
    int nextCharArrPointerPos=-1;
    if (StringChunkGroups != null && !StringChunkGroups.isEmpty()) {
      nextCharArrPointerPos=StringChunkGroups.peek().getOwnerIndex();
    }
    if (pointer < used) {
      int limit=(nextCharArrPointerPos != -1) ? nextCharArrPointerPos : used;
      int len=limit - pointer;
      target.write(buffer,pointer,len);
      writtenCount+=len;
      pointer=limit;
    }
  }
  return writtenCount;
}
