{
  GrailsDomainClass domainClass=(GrailsDomainClass)this.grailsApplication.getArtefact(DomainClassArtefactHandler.TYPE,"CriteriaBuilderTestClass");
  assertNotNull(domainClass);
  GroovyObject obj=(GroovyObject)domainClass.newInstance();
  obj.setProperty("firstName","homer");
  obj.setProperty("lastName","simpson");
  obj.setProperty("age",new Integer(45));
  obj.invokeMethod("save",null);
  GroovyObject obj2=(GroovyObject)domainClass.newInstance();
  obj2.setProperty("firstName","bart");
  obj2.setProperty("lastName","simpson");
  obj2.setProperty("age",new Integer(11));
  obj2.setProperty("parent",obj);
  obj2.invokeMethod("save",null);
  GroovyObject obj3=(GroovyObject)domainClass.newInstance();
  obj3.setProperty("firstName","list");
  obj3.setProperty("lastName","simpson");
  obj3.setProperty("age",new Integer(9));
  obj3.setProperty("parent",obj);
  obj3.invokeMethod("save",null);
  List results=(List)parse(".list(offset: 10, maxSize: 20, sort: 'firstName', order: 'asc') { " + "children { " + "eq('firstName','bart');"+ "}"+ "}","Test1","CriteriaBuilderTestClass");
  assertEquals(0,results.size());
  results=(List)parse(".list(offset: 0, maxSize: 10, sort: 'age', order: 'asc') { " + "children { " + "eq('firstName','bart');"+ "}"+ "}","Test1","CriteriaBuilderTestClass");
  assertEquals(1,results.size());
}
