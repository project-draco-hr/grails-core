{
  GroovyClassLoader gcl=new GroovyClassLoader();
  gcl.parseClass("class TestController {\n" + "def list = {\n" + "}\n"+ "}\n"+ "class FirstTagLib {\n"+ "def firstTag = {\n"+ "}\n"+ "}\n"+ "class SecondTagLib {\n"+ "def secondTag = {\n"+ "}\n"+ "}");
  GrailsApplicationAttributes attrs=getAttributesForClasses(gcl.getLoadedClasses(),gcl);
  assertNotNull(attrs);
  assertNotNull(attrs.getApplicationContext());
  assertNotNull(attrs.getGrailsApplication());
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  GroovyObject controller=(GroovyObject)attrs.getApplicationContext().getBean("TestController");
  SimpleGrailsControllerHelper helper=new SimpleGrailsControllerHelper(attrs.getGrailsApplication(),attrs.getApplicationContext(),attrs.getServletContext());
  request.setAttribute(GrailsApplicationAttributes.CONTROLLER,controller);
  GroovyObject tagLib1=attrs.getTagLibraryForTag(request,response,"firstTag");
  assertNotNull(tagLib1);
}
