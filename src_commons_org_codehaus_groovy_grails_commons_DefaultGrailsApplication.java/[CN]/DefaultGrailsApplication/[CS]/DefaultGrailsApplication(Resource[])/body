{
  super();
  this.cl=new GroovyClassLoader();
  for (int i=0; resources != null && i < resources.length; i++) {
    try {
      cl.parseClass(resources[i].getFile());
    }
 catch (    CompilationFailedException e) {
      throw new org.codehaus.groovy.grails.exceptions.CompilationFailedException("Compilation error in file [" + resources[i].getFilename() + "]: "+ e.getMessage(),e);
    }
  }
  Class[] classes=cl.getLoadedClasses();
  this.controllerMap=new HashMap();
  this.pageFlowMap=new HashMap();
  for (int i=0; i < classes.length; i++) {
    if (classes[i].getName().endsWith(DefaultGrailsControllerClass.CONTROLLER)) {
      GrailsControllerClass grailsControllerClass=new DefaultGrailsControllerClass(classes[i]);
      if (grailsControllerClass.getAvailable()) {
        this.controllerMap.put(grailsControllerClass.getFullName(),grailsControllerClass);
      }
    }
 else     if (classes[i].getName().endsWith(DefaultGrailsPageFlowClass.PAGE_FLOW)) {
      GrailsPageFlowClass grailsPageFlowClass=new DefaultGrailsPageFlowClass(classes[i]);
      if (grailsPageFlowClass.getAvailable()) {
        this.pageFlowMap.put(grailsPageFlowClass.getFullName(),grailsPageFlowClass);
      }
    }
  }
  this.controllerClasses=((GrailsControllerClass[])controllerMap.values().toArray(new GrailsControllerClass[controllerMap.size()]));
  this.pageFlows=((GrailsPageFlowClass[])pageFlowMap.values().toArray(new GrailsPageFlowClass[pageFlowMap.size()]));
}
