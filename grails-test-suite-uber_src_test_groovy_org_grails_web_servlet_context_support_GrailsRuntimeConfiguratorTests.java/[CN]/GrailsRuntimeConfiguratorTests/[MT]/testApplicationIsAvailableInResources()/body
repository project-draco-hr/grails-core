{
  GroovyClassLoader gcl=new GroovyClassLoader();
  gcl.parseClass("class Holder { def value }");
  gcl.parseClass("beans = { b(Holder, value: application); b2(Holder, value: grailsApplication) }","resources.groovy");
  GrailsApplication app=new DefaultGrailsApplication(new Class[]{},gcl);
  RuntimeSpringConfiguration springConfig=new DefaultRuntimeSpringConfiguration();
  GrailsRuntimeConfigurator.loadExternalSpringConfig(springConfig,app);
  for (  String bean : new String[]{"b","b2"}) {
    assertTrue(springConfig.containsBean(bean));
    BeanConfiguration beanConfig=springConfig.getBeanConfig(bean);
    assertTrue(beanConfig.hasProperty("value"));
    assertEquals(app,beanConfig.getPropertyValue("value"));
  }
}
