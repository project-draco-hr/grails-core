{
  Binding binding=new Binding();
  GroovyObject controller=(GroovyObject)request.getAttribute(GrailsControllerClass.REQUEST_CONTROLLER);
  binding.setVariable(GroovyPage.REQUEST,controller.getProperty(ControllerDynamicMethods.REQUEST_PROPERTY));
  binding.setVariable(GroovyPage.RESPONSE,controller.getProperty(ControllerDynamicMethods.RESPONSE_PROPERTY));
  binding.setVariable(GroovyPage.SERVLET_CONTEXT,context);
  WebApplicationContext appContext=(WebApplicationContext)context.getAttribute(GrailsApplication.APPLICATION_CONTEXT);
  binding.setVariable(GroovyPage.APPLICATION_CONTEXT,appContext);
  binding.setVariable(GrailsApplication.APPLICATION_ID,appContext.getBean(GrailsApplication.APPLICATION_ID));
  binding.setVariable(GrailsControllerClass.REQUEST_CONTROLLER,controller);
  binding.setVariable(GrailsTagLibClass.REQUEST_TAG_LIB,request.getAttribute(GrailsTagLibClass.REQUEST_TAG_LIB));
  binding.setVariable(GroovyPage.SESSION,controller.getProperty(GetSessionDynamicProperty.PROPERTY_NAME));
  binding.setVariable(GroovyPage.PARAMS,controller.getProperty(GetParamsDynamicProperty.PROPERTY_NAME));
  binding.setVariable(GroovyPage.OUT,out);
  binding.setVariable("grailsTagRegistry",GrailsTagRegistry.getInstance());
  for (Enumeration attributeEnum=request.getAttributeNames(); attributeEnum.hasMoreElements(); ) {
    String key=(String)attributeEnum.nextElement();
    try {
      binding.getVariable(key);
    }
 catch (    MissingPropertyException mpe) {
      binding.setVariable(key,request.getAttribute(key));
    }
  }
  for (Iterator i=additionalBinding.keySet().iterator(); i.hasNext(); ) {
    String key=(String)i.next();
    binding.setVariable(key,additionalBinding.get(key));
  }
  return binding;
}
