{
  if (incNestingCount() > 1) {
    return;
  }
  if (TransactionSynchronizationManager.hasResource(sessionFactory)) {
    setParticipate(true);
  }
 else {
    setParticipate(false);
    LOG.debug("Opening single Hibernate session in HibernatePersistenceContextInterceptor");
    Session session=getSession();
    GrailsHibernateUtil.enableDynamicFilterEnablerIfPresent(sessionFactory,session);
    session.setFlushMode(FlushMode.AUTO);
    TransactionSynchronizationManager.bindResource(sessionFactory,new SessionHolder(session));
  }
}
