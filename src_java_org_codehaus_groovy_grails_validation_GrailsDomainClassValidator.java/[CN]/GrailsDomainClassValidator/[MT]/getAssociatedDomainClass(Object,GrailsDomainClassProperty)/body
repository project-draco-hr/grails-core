{
  if (persistentProperty.isEmbedded()) {
    return persistentProperty.getComponent();
  }
 else {
    if (grailsApplication != null) {
      return getAssociatedDomainClassFromApplication(associatedObject);
    }
 else     return persistentProperty.getReferencedDomainClass();
  }
}
