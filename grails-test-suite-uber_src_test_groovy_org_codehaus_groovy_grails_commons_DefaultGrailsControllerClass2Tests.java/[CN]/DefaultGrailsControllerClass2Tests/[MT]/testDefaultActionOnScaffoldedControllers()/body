{
  GroovyClassLoader cl=new GrailsAwareClassLoader();
  Class<?> clazz=cl.parseClass("@grails.artefact.Artefact(\"Controller\") class MyTestController { static scaffold = true; def test() {}} ");
  GrailsControllerClass grailsClass=new DefaultGrailsControllerClass(clazz);
  assignGrailsApplication(cl,grailsClass);
  grailsClass.initialize();
  assertEquals("index",grailsClass.getDefaultAction());
  clazz=cl.parseClass("@grails.artefact.Artefact(\"Controller\") class MyTestController { static scaffold = true; def test =  {}} ");
  grailsClass=new DefaultGrailsControllerClass(clazz);
  assignGrailsApplication(cl,grailsClass);
  grailsClass.initialize();
  assertEquals("index",grailsClass.getDefaultAction());
  clazz=cl.parseClass("@grails.artefact.Artefact(\"Controller\") class MyTestController { static scaffold = true; def one() {}; def two(){};} ");
  grailsClass=new DefaultGrailsControllerClass(clazz);
  assignGrailsApplication(cl,grailsClass);
  grailsClass.initialize();
  assertEquals("index",grailsClass.getDefaultAction());
  clazz=cl.parseClass("@grails.artefact.Artefact(\"Controller\") class MyTestController { static scaffold = true; def one = {}; def two ={};} ");
  grailsClass=new DefaultGrailsControllerClass(clazz);
  assignGrailsApplication(cl,grailsClass);
  grailsClass.initialize();
  assertEquals("index",grailsClass.getDefaultAction());
  clazz=cl.parseClass("@grails.artefact.Artefact(\"Controller\") class MyTestController { static scaffold = true; def one(){}; def two ={};} ");
  grailsClass=new DefaultGrailsControllerClass(clazz);
  assignGrailsApplication(cl,grailsClass);
  grailsClass.initialize();
  assertEquals("index",grailsClass.getDefaultAction());
}
