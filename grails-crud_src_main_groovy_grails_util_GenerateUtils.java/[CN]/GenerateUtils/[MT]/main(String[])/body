{
  if (args.length < 2) {
    return;
  }
  String type=args[0];
  String domainClassName=args[1];
  ApplicationContext parent=new ClassPathXmlApplicationContext("applicationContext.xml");
  GrailsApplication application=parent.getBean("grailsApplication",DefaultGrailsApplication.class);
  GrailsDomainClass domainClass=findInApplication(application,domainClassName);
  if (domainClass == null) {
    GrailsRuntimeConfigurator config=new GrailsRuntimeConfigurator(application,parent);
    config.configure(new MockServletContext());
  }
  domainClass=findInApplication(application,domainClassName);
  if (domainClass == null) {
    LOG.info("Unable to generate [" + type + "] domain class not found for name ["+ domainClassName+ "]");
    System.exit(0);
  }
  try {
    GroovyClassLoader gcl=new GroovyClassLoader(Thread.currentThread().getContextClassLoader());
    GrailsTemplateGenerator generator=(GrailsTemplateGenerator)gcl.parseClass(gcl.getResourceAsStream("org/codehaus/groovy/grails/scaffolding/DefaultGrailsTemplateGenerator.groovy"),"DefaultGrailsTemplateGenerator.groovy").newInstance();
    if (!CONTROLLER.equals(type) && !VIEWS.equals(type) && !ALL.equals(type)) {
      LOG.info("Grails was unable to generate templates for unsupported type [" + type + "]");
    }
 else {
      if (VIEWS.equals(type) || ALL.equals(type)) {
        LOG.info("Generating views for domain class [" + domainClass.getName() + "]");
        generator.generateViews(domainClass,".");
      }
      if (CONTROLLER.equals(type) || ALL.equals(type)) {
        LOG.info("Generating controller for domain class [" + domainClass.getName() + "]");
        generator.generateController(domainClass,".");
      }
    }
  }
 catch (  Throwable t) {
    LOG.info("Error during code generation: " + t.getMessage());
    LOG.error(t.getMessage(),t);
  }
 finally {
    System.exit(0);
  }
}
