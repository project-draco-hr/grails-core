{
  ScaffoldCallback callback=new DefaultScaffoldCallback();
  Map model=this.scaffoldRequestHandler.handleUpdate(request,response,callback);
  if (callback.isInvoked()) {
    Closure showAction=(Closure)controller.getProperty(SHOW_ACTION);
    Map arguments=new HashMap();
    arguments.put(ChainDynamicMethod.ARGUMENT_ACTION,showAction);
    arguments.put(ChainDynamicMethod.ARGUMENT_MODEL,model);
    arguments.put(ChainDynamicMethod.ARGUMENT_PARAMS,model);
    return controller.invokeMethod(ChainDynamicMethod.METHOD_SIGNATURE,new Object[]{arguments});
  }
 else {
    Closure editAction=(Closure)controller.getProperty(EDIT_ACTION);
    Map arguments=new HashMap();
    arguments.put(RedirectDynamicMethod.ARGUMENT_ACTION,editAction);
    arguments.put(RedirectDynamicMethod.ARGUMENT_ERRORS,callback.getErrors() != null ? callback.getErrors().getAllErrors() : new ArrayList());
    return controller.invokeMethod(RedirectDynamicMethod.METHOD_SIGNATURE,new Object[]{arguments});
  }
}
