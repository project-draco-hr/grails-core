{
  LOG.debug("Initializing default JSON Converters Configuration...");
  List<ObjectMarshaller<JSON>> marshallers=new ArrayList<ObjectMarshaller<JSON>>();
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.ArrayMarshaller());
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.ByteArrayMarshaller());
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.CollectionMarshaller());
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.MapMarshaller());
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.EnumMarshaller());
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.ProxyUnwrappingMarshaller<JSON>());
  if ("javascript".equals(GrailsConfig.get("grails.converters.json.date","default",Arrays.asList("javascript","default")))) {
    LOG.debug("Using Javascript JSON Date Marshaller.");
    marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.JavascriptDateMarshaller());
  }
 else {
    LOG.debug("Using default JSON Date Marshaller");
    marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.DateMarshaller());
  }
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.ToStringBeanMarshaller());
  if (GrailsConfig.get("grails.converters.json.default.deep",false)) {
    LOG.debug("Using DeepDomainClassMarshaller as default.");
    marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.DeepDomainClassMarshaller());
  }
 else {
    marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.DomainClassMarshaller());
  }
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.GroovyBeanMarshaller());
  marshallers.add(new org.codehaus.groovy.grails.web.converters.marshaller.json.GenericJavaBeanMarshaller());
  DefaultConverterConfiguration<JSON> cfg=new DefaultConverterConfiguration<JSON>(marshallers);
  cfg.setEncoding(GrailsConfig.get("grails.converters.encoding","UTF-8"));
  String defaultCirRefBehaviour=GrailsConfig.get("grails.converters.default.circular.reference.behaviour","DEFAULT");
  cfg.setCircularReferenceBehaviour(Converter.CircularReferenceBehaviour.valueOf(GrailsConfig.get("grails.converters.json.circular.reference.behaviour",defaultCirRefBehaviour,Arrays.asList("DEFAULT","EXCEPTION","INSERT_NULL"))));
  Boolean defaultPrettyPrint=GrailsConfig.get("grails.converters.default.pretty.print",false);
  Boolean prettyPrint=GrailsConfig.get("grails.converters.json.pretty.print",defaultPrettyPrint);
  cfg.setPrettyPrint(prettyPrint);
  registerObjectMarshallersFromApplicationContext(cfg,JSON.class);
  ConvertersConfigurationHolder.setDefaultConfiguration(JSON.class,new ChainedConverterConfiguration<JSON>(cfg));
}
