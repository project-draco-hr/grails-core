{
  if (this.subflowOutputClosure != null) {
    Object returnValue=this.subflowOutputClosure.call(context);
    if (returnValue == null) {
      return;
    }
 else     if (returnValue instanceof Map) {
      context.getFlowExecutionContext().getActiveSession().getParent().getScope().setAttributes((Map)returnValue);
    }
 else {
      throw new InvalidClosureReturnValueException("Return value of type [" + returnValue.getClass().getName() + "] of subflow output closure for flow attribute mapper of state ["+ this.stateId+ "] of page flow ["+ this.flowId+ "] is not supported!");
    }
  }
}
