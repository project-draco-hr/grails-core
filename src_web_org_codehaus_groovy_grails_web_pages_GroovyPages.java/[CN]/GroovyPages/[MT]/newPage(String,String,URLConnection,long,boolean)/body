{
  Parse parse=new Parse(pageId,groovyScriptConn.getInputStream());
  InputStream in=parse.parse();
  PageMeta pageMeta=new PageMeta();
  if (spillGroovy) {
    pageMeta.groovySource=in;
    return pageMeta;
  }
  GroovyClassLoader groovyLoader=new Loader(parent,context,servletPath,pageMeta.dependencies);
  Class scriptClass;
  try {
    scriptClass=groovyLoader.parseClass(in,pageId.substring(1));
  }
 catch (  CompilationFailedException e) {
    throw new ServletException("Could not parse script: " + pageId,e);
  }
  pageMeta.servletScriptClass=scriptClass;
  pageMeta.lastModified=lastModified;
  pageCache.put(pageId,pageMeta);
  return pageMeta;
}
