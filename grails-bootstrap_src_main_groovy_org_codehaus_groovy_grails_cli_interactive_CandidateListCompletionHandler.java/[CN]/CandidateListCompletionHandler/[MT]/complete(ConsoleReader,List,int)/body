{
  CursorBuffer buf=reader.getCursorBuffer();
  if (candidates.size() == 1) {
    String value=candidates.get(0).toString();
    if (value.equals(buf.toString())) {
      return false;
    }
    jline.CandidateListCompletionHandler.setBuffer(reader,value,pos);
    return true;
  }
 else   if (candidates.size() > 1) {
    String value=getUnambiguousCompletions(candidates);
    jline.CandidateListCompletionHandler.setBuffer(reader,value,pos);
  }
  if (eagerNewlines)   reader.printNewline();
  jline.CandidateListCompletionHandler.printCandidates(reader,candidates,eagerNewlines);
  reader.drawLine();
  return true;
}
