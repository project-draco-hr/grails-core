{
  GrailsWebRequest webRequest=(GrailsWebRequest)request.getAttribute(GrailsApplicationAttributes.WEB_REQUEST,WebRequest.SCOPE_REQUEST);
  final boolean isFlowRequest=webRequest.isFlowRequest();
  if (isFlowRequest) {
    webRequest.setAttribute(IS_FLOW_REQUEST_ATTRIBUTE,"true",WebRequest.SCOPE_REQUEST);
  }
 else {
    super.preHandle(request);
    SessionFactory sessionFactory=getSessionFactory();
    SessionHolder sessionHolder=(SessionHolder)TransactionSynchronizationManager.getResource(sessionFactory);
    Session session=sessionHolder.getSession();
    GrailsHibernateUtil.enableDynamicFilterEnablerIfPresent(sessionFactory,session);
  }
}
