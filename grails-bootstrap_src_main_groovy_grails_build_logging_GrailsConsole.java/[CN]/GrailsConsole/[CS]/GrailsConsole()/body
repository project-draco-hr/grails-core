{
  cursorMove=1;
  originalSystemOut=System.out;
  originalSystemErr=System.err;
  out=new PrintStream(ansiWrap(originalSystemOut));
  err=new PrintStream(ansiWrap(originalSystemErr));
  System.setOut(new GrailsConsolePrintStream(out));
  System.setErr(new GrailsConsoleErrorPrintStream(err));
  if (isInteractiveEnabled()) {
    reader=createConsoleReader();
    reader.setBellEnabled(false);
    reader.setCompletionHandler(new CandidateListCompletionHandler());
    if (isActivateTerminal()) {
      terminal=createTerminal();
    }
    history=prepareHistory();
    if (history != null) {
      reader.setHistory(history);
    }
  }
 else   if (isActivateTerminal()) {
    terminal=createTerminal();
  }
  maxIndicatorString=new StringBuilder(indicator).append(indicator).append(indicator).append(indicator).append(indicator);
}
