{
  Writer originalOut=webRequest.getOut();
  try {
    final GroovyPageTagWriter capturedOut=createWriter();
    Object bodyResult;
    if (args != null) {
      if (args instanceof Map) {
        Map currentBinding=binding.getVariables();
        Map originalBinding=new HashMap(currentBinding);
        currentBinding.putAll((Map)args);
        try {
          bodyResult=bodyClosure.call(args);
        }
  finally {
          currentBinding.clear();
          currentBinding.putAll(originalBinding);
        }
      }
 else {
        bodyResult=bodyClosure.call(args);
      }
    }
 else {
      bodyResult=bodyClosure.call();
    }
    String output=capturedOut.getValue();
    if (org.apache.commons.lang.StringUtils.isBlank(output)) {
      if (bodyResult instanceof String) {
        return bodyResult;
      }
 else       if (bodyResult instanceof GString) {
        return bodyResult.toString();
      }
 else {
        return BLANK_STRING;
      }
    }
    return output;
  }
  finally {
    if (binding != null) {
      binding.setVariable(GroovyPage.OUT,originalOut);
    }
    webRequest.setOut(originalOut);
  }
}
