{
  GrailsPageFlowClass[] pageFlows=application.getPageFlows();
  for (int i=0; i < pageFlows.length; i++) {
    GrailsPageFlowClass pageFlow=pageFlows[i];
    if (!pageFlow.getAvailable()) {
      continue;
    }
    Bean pageFlowClass=SpringConfigUtils.createSingletonBean(MethodInvokingFactoryBean.class);
    pageFlowClass.setProperty("targetObject",SpringConfigUtils.createBeanReference("grailsApplication"));
    pageFlowClass.setProperty("targetMethod",SpringConfigUtils.createLiteralValue("getPageFlow"));
    pageFlowClass.setProperty("arguments",SpringConfigUtils.createLiteralValue(pageFlow.getFullName()));
    beanReferences.add(SpringConfigUtils.createBeanReference(pageFlow.getFullName() + "Class",pageFlowClass));
    Bean pageFlowInstance=SpringConfigUtils.createSingletonBean();
    pageFlowInstance.setFactoryBean(SpringConfigUtils.createBeanReference(pageFlow.getFullName() + "Class"));
    pageFlowInstance.setFactoryMethod("newInstance");
    if (pageFlow.byType()) {
      pageFlowInstance.setAutowire("byType");
    }
 else     if (pageFlow.byName()) {
      pageFlowInstance.setAutowire("byName");
    }
    beanReferences.add(SpringConfigUtils.createBeanReference(pageFlow.getFullName(),pageFlowInstance));
    Bean flowBuilder=SpringConfigUtils.createSingletonBean(GrailsFlowBuilder.class);
    flowBuilder.setProperty("pageFlowClass",SpringConfigUtils.createBeanReference(pageFlow.getFullName() + "Class"));
    Bean flowFactoryBean=SpringConfigUtils.createSingletonBean(FlowFactoryBean.class);
    flowFactoryBean.setProperty("flowBuilder",flowBuilder);
    beanReferences.add(SpringConfigUtils.createBeanReference(pageFlow.getFlowId(),flowFactoryBean));
    if (pageFlow.getAccessible()) {
      Bean flowExecutionManager=SpringConfigUtils.createSingletonBean(GrailsServletFlowExecutionManager.class);
      flowExecutionManager.setProperty("flow",SpringConfigUtils.createBeanReference(pageFlow.getFlowId()));
      Bean flowController=SpringConfigUtils.createSingletonBean(FlowController.class);
      flowController.setProperty("flowExecutionManager",flowExecutionManager);
      beanReferences.add(SpringConfigUtils.createBeanReference(pageFlow.getFullName() + "Controller",flowController));
      urlMappings.put(pageFlow.getUri(),pageFlow.getFullName() + "Controller");
    }
  }
}
