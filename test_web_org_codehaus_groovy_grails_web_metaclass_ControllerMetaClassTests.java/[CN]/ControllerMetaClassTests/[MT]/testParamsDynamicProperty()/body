{
  GroovyClassLoader gcl=new GroovyClassLoader();
  MockHttpServletRequest request=new MockHttpServletRequest();
  MockHttpServletResponse response=new MockHttpServletResponse();
  request.addParameter("testParam","testValue");
  Class groovyClass=gcl.parseClass("class TestController {\n" + "def testMethod() {\n" + "}\n"+ "}");
  ProxyMetaClass pmc=PropertyAccessProxyMetaClass.getInstance(groovyClass);
  pmc.setInterceptor(new ControllerDynamicMethodsInterceptor(groovyClass,request,response));
  GroovyObject go=(GroovyObject)groovyClass.newInstance();
  go.setMetaClass(pmc);
  try {
    Object params=go.getProperty("params");
    assertNotNull(params);
    assertTrue(params instanceof Map);
    Map paramsMap=(Map)params;
    assertTrue(paramsMap.containsKey("testParam"));
    assertEquals("testValue",paramsMap.get("testParam"));
  }
 catch (  MissingMethodException mme) {
    fail("Missing method exception should not have been thrown!");
  }
catch (  MissingPropertyException mpex) {
    fail("Missing property exception should not have been thrown!");
  }
}
