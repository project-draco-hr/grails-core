{
  return hibernateTemplate.execute(new HibernateCallback<Integer>(){
    public Integer doInHibernate(    Session session) throws HibernateException, SQLException {
      JpaQueryBuilder builder=new JpaQueryBuilder(criteria);
      builder.setHibernateCompatible(true);
      JpaQueryInfo jpaQueryInfo=builder.buildUpdate(properties);
      org.hibernate.Query query=session.createQuery(jpaQueryInfo.getQuery());
      List parameters=jpaQueryInfo.getParameters();
      if (parameters != null) {
        for (int i=0, count=parameters.size(); i < count; i++) {
          query.setParameter(i,parameters.get(i));
        }
      }
      return query.executeUpdate();
    }
  }
);
}
