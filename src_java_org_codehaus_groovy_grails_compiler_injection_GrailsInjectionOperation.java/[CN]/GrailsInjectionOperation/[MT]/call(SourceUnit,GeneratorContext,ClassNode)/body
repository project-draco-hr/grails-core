{
  if (applicationContext != null && resourceLoader != null) {
    try {
      URL url;
      if (GrailsResourceUtils.isGrailsPath(source.getName())) {
        url=resourceLoader.loadGroovySource(GrailsResourceUtils.getClassName(source.getName()));
      }
 else {
        url=resourceLoader.loadGroovySource(source.getName());
      }
      if (GrailsResourceUtils.isDomainClass(url)) {
        Map<String,GrailsDomainClassInjector> injectors=applicationContext.getBeansOfType(GrailsDomainClassInjector.class);
        for (        GrailsDomainClassInjector injector : injectors.values()) {
          injector.performInjection(source,context,classNode);
        }
      }
    }
 catch (    MalformedURLException e) {
      LOG.error("Error loading URL during addition of compile time properties: " + e.getMessage(),e);
      throw new CompilationFailedException(Phases.CONVERSION,source,e);
    }
  }
}
