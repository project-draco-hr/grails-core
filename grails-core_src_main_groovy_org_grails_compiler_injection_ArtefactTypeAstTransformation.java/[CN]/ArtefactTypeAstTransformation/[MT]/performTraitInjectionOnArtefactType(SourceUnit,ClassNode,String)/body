{
  if (compilationUnit != null) {
    try {
      GrailsAwareTraitInjectionOperation grailsTraitInjector=new GrailsAwareTraitInjectionOperation(compilationUnit);
      List<TraitInjector> traitInjectors=grailsTraitInjector.getTraitInjectors();
      List<TraitInjector> injectorsToUse=new ArrayList<TraitInjector>();
      for (      TraitInjector injector : traitInjectors) {
        List<String> artefactTypes=Arrays.asList(injector.getArtefactTypes());
        if (artefactTypes.contains(artefactType)) {
          injectorsToUse.add(injector);
        }
      }
      try {
        if (injectorsToUse.size() > 0) {
          grailsTraitInjector.performTraitInjection(sourceUnit,cNode,injectorsToUse);
        }
      }
 catch (      RuntimeException e) {
        try {
          GrailsConsole.getInstance().error("Error occurred calling Trait injector: " + e.getMessage(),e);
        }
 catch (        Throwable t) {
        }
        throw e;
      }
    }
 catch (    Exception e) {
      try {
        GrailsConsole.getInstance().error("Error occurred processing Trait injectors: " + e.getMessage(),e);
      }
 catch (      Throwable t) {
      }
      throw new RuntimeException(e);
    }
  }
}
