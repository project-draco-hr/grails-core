{
  ConfigObject c=ConfigurationHolder.getConfig();
  if (c == null) {
    ConfigSlurper configSlurper=new ConfigSlurper(GrailsUtil.getEnvironment());
    Map binding=new HashMap();
    binding.put(CONFIG_BINDING_USER_HOME,System.getProperty("user.home"));
    binding.put(CONFIG_BINDING_GRAILS_HOME,System.getProperty("grails.home"));
    binding.put(CONFIG_BINDING_APP_NAME,getMetadata().get("app.name"));
    binding.put(CONFIG_BINDING_APP_VERSION,getMetadata().get("app.version"));
    configSlurper.setBinding(binding);
    try {
      Class scriptClass=getClassLoader().loadClass(CONFIG_CLASS);
      c=configSlurper.parse(scriptClass);
      ConfigurationHolder.setConfig(c);
    }
 catch (    ClassNotFoundException e) {
      log.debug("Could not find config class [" + CONFIG_CLASS + "]. This is probably nothing to worry about, it is not required to have a config: "+ e.getMessage());
      c=new ConfigObject();
    }
    try {
      Class dataSourceClass=getClassLoader().loadClass(DATA_SOURCE_CLASS);
      c.merge(configSlurper.parse(dataSourceClass));
    }
 catch (    ClassNotFoundException e) {
      log.debug("Cound not find data source class [" + DATA_SOURCE_CLASS + "]. This may be what you are expecting, but will result in Grails loading with an in-memory database");
    }
    if (c == null)     c=new ConfigObject();
    ConfigurationHelper.initConfig(c,null,getClassLoader());
    ConfigurationHolder.setConfig(c);
  }
  return c;
}
