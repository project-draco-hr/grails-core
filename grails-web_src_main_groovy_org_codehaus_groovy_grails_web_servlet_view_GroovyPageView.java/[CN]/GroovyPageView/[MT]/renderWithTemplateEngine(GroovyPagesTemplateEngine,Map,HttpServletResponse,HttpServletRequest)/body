{
  Writer out=null;
  try {
    out=createResponseWriter(response);
    Template t;
    if (viewClass != null) {
      t=engine.createTemplate(viewClass);
    }
 else {
      t=engine.createTemplate(getUrl());
    }
    Writable w=t.make(model);
    w.writeTo(out);
  }
 catch (  Exception e) {
    out=createResponseWriter(response);
    handleException(e,out,engine,request,response);
  }
 finally {
    if (out != null) {
      out.close();
    }
  }
}
