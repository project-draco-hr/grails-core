{
  List properties=classNode.getProperties();
  List propertiesToAdd=Collections.EMPTY_LIST;
  for (Iterator p=properties.iterator(); p.hasNext(); ) {
    PropertyNode pn=(PropertyNode)p.next();
    final boolean isHasManyProperty=pn.getName().equals(GrailsDomainClassProperty.RELATES_TO_MANY) || pn.getName().equals(GrailsDomainClassProperty.HAS_MANY);
    if (isHasManyProperty) {
      Expression e=pn.getInitialExpression();
      propertiesToAdd=createPropertiesForAssociationExpression(e,classNode);
    }
  }
  injectAssociationProperties(classNode,propertiesToAdd);
}
