{
  SnapshotRevision rev=findSnapshotRevision(mrid);
  if (rev != null) {
    String pattern=getWholePattern().replaceFirst("\\-\\[revision\\]","-" + rev.uniqueRevision);
    ResolvedResource uniqueResource=findResourceUsingPattern(mrid,pattern,artifact,getDefaultRMDParser(artifact.getModuleRevisionId().getModuleId()),date);
    if (uniqueResource != null) {
      return new LastModifiedResolvedResource(uniqueResource.getResource(),rev.uniqueRevision,rev.lastModified);
    }
 else {
      pattern=getWholePattern().replaceFirst("\\-\\[revision\\]","-" + mrid.getRevision());
      ResolvedResource nonUnique=findResourceUsingPattern(mrid,pattern,artifact,getDefaultRMDParser(artifact.getModuleRevisionId().getModuleId()),date);
      if (nonUnique != null) {
        return new LastModifiedResolvedResource(nonUnique.getResource(),rev.revision,rev.lastModified);
      }
    }
  }
  return null;
}
