{
  if (clazz == null || propertyType == null)   return new PropertyDescriptor[0];
  Set properties=new HashSet();
  try {
    BeanWrapper wrapper=new BeanWrapperImpl(clazz.newInstance());
    PropertyDescriptor[] descriptors=wrapper.getPropertyDescriptors();
    for (int i=0; i < descriptors.length; i++) {
      if (descriptors[i].getPropertyType().isAssignableFrom(propertyType)) {
        properties.add(descriptors[i]);
      }
    }
  }
 catch (  Exception e) {
    return new PropertyDescriptor[0];
  }
  return (PropertyDescriptor[])properties.toArray(new PropertyDescriptor[properties.size()]);
}
