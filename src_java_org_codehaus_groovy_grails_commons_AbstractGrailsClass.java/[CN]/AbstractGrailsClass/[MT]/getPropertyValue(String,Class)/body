{
  BeanWrapper ref=getReference();
  Object value=null;
  if (ref.isReadableProperty(name)) {
    value=ref.getPropertyValue(name);
  }
 else {
    Object inst=ref.getWrappedInstance();
    if (inst instanceof GroovyObject) {
      final Map properties=DefaultGroovyMethods.getProperties(inst);
      if (properties.containsKey(name)) {
        value=properties.get(name);
      }
    }
  }
  if (value != null && (type.isAssignableFrom(value.getClass()) || GrailsClassUtils.isMatchBetweenPrimativeAndWrapperTypes(type,value.getClass()))) {
    return value;
  }
 else {
    return null;
  }
}
