{
  GrailsRuntimeConfigurator configurator=null;
  if (servletContext.getInitParameter(GrailsRuntimeConfigurator.BEAN_ID + "Class") != null) {
    String configuratorClassName=servletContext.getInitParameter(GrailsRuntimeConfigurator.BEAN_ID + "Class").toString();
    Class<?> configuratorClass=null;
    try {
      configuratorClass=ClassUtils.forName(configuratorClassName,application.getClassLoader());
    }
 catch (    Exception e) {
      String msg="failed to create Grails runtime configurator as specified in web.xml: " + configuratorClassName;
      LOG.error("[GrailsContextLoader] " + msg,e);
      throw new IllegalArgumentException(msg);
    }
    if (!GrailsRuntimeConfigurator.class.isAssignableFrom(configuratorClass)) {
      throw new IllegalArgumentException("class " + configuratorClassName + " is not assignable to "+ GrailsRuntimeConfigurator.class.getName());
    }
    Constructor<?> constr=ClassUtils.getConstructorIfAvailable(configuratorClass,GrailsApplication.class,ApplicationContext.class);
    configurator=(GrailsRuntimeConfigurator)BeanUtils.instantiateClass(constr,application,parent);
  }
  return configurator;
}
