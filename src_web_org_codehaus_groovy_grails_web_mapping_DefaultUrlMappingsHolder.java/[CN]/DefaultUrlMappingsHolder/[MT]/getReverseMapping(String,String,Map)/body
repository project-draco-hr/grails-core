{
  if (params == null)   params=Collections.EMPTY_MAP;
  UrlMapping mapping=(UrlMapping)mappingsLookup.get(new UrlMappingKey(controller,action,params.keySet()));
  if (mapping == null || (mapping instanceof ResponseCodeUrlMapping)) {
    mapping=(UrlMapping)mappingsLookup.get(new UrlMappingKey(controller,action,Collections.EMPTY_SET));
  }
  if (mapping == null || (mapping instanceof ResponseCodeUrlMapping)) {
    mapping=(UrlMapping)mappingsLookup.get(new UrlMappingKey(controller,null,DEFAULT_ACTION_PARAMS));
  }
  if (mapping == null || (mapping instanceof ResponseCodeUrlMapping)) {
    mapping=(UrlMapping)mappingsLookup.get(new UrlMappingKey(null,null,DEFAULT_CONTROLLER_PARAMS));
  }
  if (mapping == null || (mapping instanceof ResponseCodeUrlMapping)) {
    return new DefaultUrlCreator(controller,action);
  }
 else {
    return mapping;
  }
}
