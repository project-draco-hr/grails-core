{
  final BlockStatement catchBlockCode=new BlockStatement();
  final String caughtExceptionArgumentName="$caughtException";
  final Expression caughtExceptionVariableExpression=new VariableExpression(caughtExceptionArgumentName);
  final Expression caughtExceptionTypeExpression=new PropertyExpression(caughtExceptionVariableExpression,"class");
  final Expression thisExpression=new VariableExpression("this");
  final MethodCallExpression getExceptionHandlerMethodCall=new MethodCallExpression(thisExpression,"getExceptionHandlerMethodFor",caughtExceptionTypeExpression);
  applyDefaultMethodTarget(getExceptionHandlerMethodCall,controllerClassNode);
  final ClassNode reflectMethodClassNode=new ClassNode(Method.class);
  final String exceptionHandlerMethodVariableName="$method";
  final Expression exceptionHandlerMethodExpression=new VariableExpression(exceptionHandlerMethodVariableName,new ClassNode(Method.class));
  final Expression declareExceptionHandlerMethod=new DeclarationExpression(new VariableExpression(exceptionHandlerMethodVariableName,reflectMethodClassNode),Token.newSymbol(Types.EQUALS,0,0),getExceptionHandlerMethodCall);
  final ArgumentListExpression invokeArguments=new ArgumentListExpression();
  invokeArguments.addExpression(thisExpression);
  invokeArguments.addExpression(caughtExceptionVariableExpression);
  final MethodCallExpression invokeExceptionHandlerMethodExpression=new MethodCallExpression(new VariableExpression(exceptionHandlerMethodVariableName),"invoke",invokeArguments);
  applyDefaultMethodTarget(invokeExceptionHandlerMethodExpression,reflectMethodClassNode);
  final Statement returnStatement=new ReturnStatement(invokeExceptionHandlerMethodExpression);
  final Statement throwCaughtExceptionStatement=new ThrowStatement(caughtExceptionVariableExpression);
  final Statement ifExceptionHandlerMethodExistsStatement=new IfStatement(new BooleanExpression(exceptionHandlerMethodExpression),returnStatement,throwCaughtExceptionStatement);
  catchBlockCode.addStatement(new ExpressionStatement(declareExceptionHandlerMethod));
  catchBlockCode.addStatement(ifExceptionHandlerMethodExistsStatement);
  final CatchStatement catchStatement=new CatchStatement(new Parameter(new ClassNode(Exception.class),caughtExceptionArgumentName),catchBlockCode);
  final Statement methodBody=methodNode.getCode();
  final TryCatchStatement tryCatchStatement=new TryCatchStatement(methodBody,new EmptyStatement());
  tryCatchStatement.addCatch(catchStatement);
  methodNode.setCode(tryCatchStatement);
}
