{
  for (Iterator i=beanConfigs.iterator(); i.hasNext(); ) {
    BeanConfiguration bc=(BeanConfiguration)i.next();
    if (LOG.isDebugEnabled()) {
      LOG.debug("[RuntimeConfiguration] Registering bean [" + bc.getName() + "]");
      if (LOG.isTraceEnabled()) {
        PropertyValue[] pvs=bc.getBeanDefinition().getPropertyValues().getPropertyValues();
        for (int j=0; j < pvs.length; j++) {
          PropertyValue pv=pvs[j];
          LOG.trace("[RuntimeConfiguration] With property [" + pv.getName() + "] set to ["+ pv.getValue()+ "]");
        }
      }
    }
    context.registerBeanDefinition(bc.getName(),bc.getBeanDefinition());
  }
  for (Iterator i=beanDefinitions.keySet().iterator(); i.hasNext(); ) {
    Object key=i.next();
    BeanDefinition bd=(BeanDefinition)beanDefinitions.get(key);
    if (LOG.isDebugEnabled()) {
      LOG.debug("[RuntimeConfiguration] Registering bean [" + key + "]");
      if (LOG.isTraceEnabled()) {
        PropertyValue[] pvs=bd.getPropertyValues().getPropertyValues();
        for (int j=0; j < pvs.length; j++) {
          PropertyValue pv=pvs[j];
          LOG.trace("[RuntimeConfiguration] With property [" + pv.getName() + "] set to ["+ pv.getValue()+ "]");
        }
      }
    }
    context.registerBeanDefinition(key.toString(),bd);
  }
  context.refresh();
  return context;
}
