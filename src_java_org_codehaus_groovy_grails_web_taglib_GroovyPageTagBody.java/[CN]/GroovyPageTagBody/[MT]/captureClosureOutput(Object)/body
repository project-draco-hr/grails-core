{
  final GroovyPageTagWriter capturedOut=new GroovyPageTagWriter(preferSubChunkWhenWritingToOtherBuffer);
  try {
    GroovyPageOutputStack.currentStack().push(capturedOut);
    Object bodyResult;
    if (args != null) {
      if (args instanceof Map) {
        Map currentBinding=null;
        Map originalBinding=null;
        if (binding != null) {
          currentBinding=binding.getVariables();
          originalBinding=new HashMap(currentBinding);
          currentBinding.putAll((Map)args);
        }
        try {
          bodyResult=executeClosure(bodyClosure,args);
        }
  finally {
          if (binding != null) {
            currentBinding.clear();
            currentBinding.putAll(originalBinding);
          }
        }
      }
 else {
        bodyResult=executeClosure(bodyClosure,args);
      }
    }
 else {
      bodyResult=executeClosure(bodyClosure,null);
    }
    if (!capturedOut.isUsed() && bodyResult != null && !(bodyResult instanceof Writer)) {
      return bodyResult;
    }
    return capturedOut.getBuffer();
  }
  finally {
    GroovyPageOutputStack.currentStack().pop();
  }
}
