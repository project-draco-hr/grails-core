{
  String src="This is just plain ASCII to make sure test works on all platforms";
  assertEquals(src.indexOf('?'),-1);
  ConfigObject config=new ConfigSlurper().parse("grails.views.gsp.encoding = \"\"");
  ConfigurationHolder.setConfig(config);
  String output=null;
  try {
    output=parseCode("myTest",src);
  }
  finally {
    ConfigurationHolder.setConfig(null);
  }
  String expected=makeImports() + "\n" + "class myTest extends GroovyPage {\n"+ "public String getGroovyPageFileName() { \"myTest\" }\n"+ "public Object run() {\n"+ "def params = binding.params\n"+ "def request = binding.request\n"+ "def flash = binding.flash\n"+ "def response = binding.response\n"+ "out.print('"+ src+ "')\n"+ "}\n"+ "}";
  assertEquals(trimAndRemoveCR(expected),trimAndRemoveCR(output));
}
