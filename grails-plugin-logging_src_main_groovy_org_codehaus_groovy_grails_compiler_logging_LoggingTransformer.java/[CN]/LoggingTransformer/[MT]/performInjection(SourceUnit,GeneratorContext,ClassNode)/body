{
  final FieldNode existingField=classNode.getField(LOG_PROPERTY);
  if (existingField == null) {
    final String path=source.getName();
    String artefactType=path != null ? GrailsResourceUtils.getArtefactDirectory(path) : null;
    String logName=artefactType == null ? classNode.getName() : "grails.app." + artefactType + "."+ classNode.getName();
    FieldNode logVariable=new FieldNode(LOG_PROPERTY,Modifier.STATIC | Modifier.PRIVATE,new ClassNode(Log.class),classNode,new MethodCallExpression(new ClassExpression(new ClassNode(LogFactory.class)),"getLog",new ArgumentListExpression(new ConstantExpression(logName))));
    classNode.addField(logVariable);
  }
}
