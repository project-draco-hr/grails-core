{
  Map<String,Object> map=new LinkedHashMap<String,Object>();
  for (  String propertyName : enumerablePropertySource.getPropertyNames()) {
    Object value=enumerablePropertySource.getProperty(propertyName);
    if (value instanceof ConfigObject) {
      if (((ConfigObject)value).isEmpty())       continue;
    }
    if (value instanceof CharSequence) {
      value=resolvePlaceholders(value.toString());
    }
    if (prefix != null) {
      map.put(prefix + '.' + propertyName,value);
    }
 else {
      map.put(propertyName,value);
    }
  }
  configMap.merge(map,true);
  configMap.merge(map);
}
