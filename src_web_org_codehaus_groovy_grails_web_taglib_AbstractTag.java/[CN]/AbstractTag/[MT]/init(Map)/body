{
  if (context == null)   throw new IllegalArgumentException("Argument 'context' cannot be null");
  this.out=(Writer)context.get(GroovyPage.OUT);
  this.request=(ServletRequest)context.get(GroovyPage.REQUEST);
  this.servletContext=(ServletContext)context.get(GroovyPage.SERVLET_CONTEXT);
  this.response=(ServletResponse)context.get(GroovyPage.RESPONSE);
  this.applicationContext=RequestContextUtils.getWebApplicationContext(request,servletContext);
  this.grailsApplication=(GrailsApplication)this.applicationContext.getBean(GrailsApplication.APPLICATION_ID);
  this.bean=new BeanWrapperImpl(this);
  if (context.get(GroovyPage.ATTRIBUTES) == null)   this.attributes=new HashMap();
 else {
    this.attributes=(Map)context.get(GroovyPage.ATTRIBUTES);
  }
  this.contextPath=urlPathHelper.getContextPath((HttpServletRequest)this.request);
  this.init=true;
}
