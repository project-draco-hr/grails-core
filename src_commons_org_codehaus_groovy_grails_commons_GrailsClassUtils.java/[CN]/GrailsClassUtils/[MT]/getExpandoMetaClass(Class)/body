{
  MetaClassRegistry registry=InvokerHelper.getInstance().getMetaRegistry();
  MetaClass mc=registry.getMetaClass(clazz);
  if (mc instanceof DynamicMethodsMetaClass) {
    return ((DynamicMethodsMetaClass)mc).getAdaptee();
  }
 else   if (mc instanceof AdapterMetaClass) {
    return ((AdapterMetaClass)mc).getAdaptee();
  }
 else   if (mc instanceof ProxyMetaClass) {
    return ((ProxyMetaClass)mc).getAdaptee();
  }
 else   if (MetaClassImpl.class == mc.getClass()) {
    registry.removeMetaClass(clazz);
    return registry.getMetaClass(clazz);
  }
  return mc;
}
