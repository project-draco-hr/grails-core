{
  request.setAttribute(GrailsApplicationAttributes.REQUEST_SCOPE_ID,grailsAttributes);
  request.setAttribute(GroovyPagesServlet.SERVLET_INSTANCE,this);
  String pageName=(String)request.getAttribute(GrailsApplicationAttributes.GSP_TO_RENDER);
  if (StringUtils.isBlank(pageName)) {
    pageName=groovyPagesTemplateEngine.getCurrentRequestUri(request);
  }
  if (isSecurePath(pageName)) {
    sendNotFound(response,pageName);
  }
 else {
    Template template=groovyPagesTemplateEngine.createTemplateForUri(pageName);
    if (template == null) {
      template=findPageInBinaryPlugins(pageName);
    }
    if (template == null) {
      sendNotFound(response,pageName);
      return;
    }
    renderPageWithEngine(groovyPagesTemplateEngine,request,response,template);
  }
}
