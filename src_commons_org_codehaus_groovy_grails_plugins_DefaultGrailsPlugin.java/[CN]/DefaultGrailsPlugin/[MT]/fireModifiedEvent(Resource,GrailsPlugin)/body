{
  Class loadedClass=null;
  String className=GrailsResourceUtils.getClassName(resource);
  if (className != null) {
    Class oldClass=application.getClassForName(className);
    loadedClass=attemptClassReload(className);
    Assert.isTrue(oldClass != loadedClass,"Problem reloading class [" + oldClass + "]. The reload was not successful!");
    replaceExpandoMetaClass(loadedClass,oldClass);
  }
  final Class resourceClass=loadedClass;
  Map event=new HashMap(){
{
      if (resourceClass == null)       put(PLUGIN_CHANGE_EVENT_SOURCE,resource);
 else       put(PLUGIN_CHANGE_EVENT_SOURCE,resourceClass);
      put(PLUGIN_CHANGE_EVENT_PLUGIN,plugin);
      put(PLUGIN_CHANGE_EVENT_APPLICATION,application);
      put(PLUGIN_CHANGE_EVENT_MANAGER,getManager());
      put(PLUGIN_CHANGE_EVENT_CTX,applicationContext);
    }
  }
;
  invokeOnChangeListener(event);
  getManager().informObservers(getName(),event);
}
