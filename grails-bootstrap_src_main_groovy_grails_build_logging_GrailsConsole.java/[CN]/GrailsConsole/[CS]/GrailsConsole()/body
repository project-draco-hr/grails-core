{
  cursorMove=1;
  out=new PrintStream(ansiWrap(System.out));
  System.setOut(new GrailsConsolePrintStream(out));
  System.setErr(new GrailsConsoleErrorPrintStream(ansiWrap(System.err)));
  reader=createConsoleReader();
  reader.setBellEnabled(false);
  reader.setCompletionHandler(new CandidateListCompletionHandler());
  terminal=createTerminal();
  history=prepareHistory();
  reader.setHistory(history);
  maxIndicatorString=new StringBuilder(indicator).append(indicator).append(indicator).append(indicator).append(indicator);
  out.println();
}
