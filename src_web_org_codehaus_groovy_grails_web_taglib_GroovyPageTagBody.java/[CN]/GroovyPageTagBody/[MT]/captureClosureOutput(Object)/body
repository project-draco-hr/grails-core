{
  Writer originalOut=webRequest.getOut();
  try {
    final GroovyPageTagWriter capturedOut=createWriter();
    if (args != null) {
      if (args instanceof Map) {
        Map currentBinding=binding.getVariables();
        Map originalBinding=new HashMap(currentBinding);
        currentBinding.putAll((Map)args);
        try {
          bodyClosure.call(args);
        }
  finally {
          currentBinding.clear();
          currentBinding.putAll(originalBinding);
        }
      }
 else {
        bodyClosure.call(args);
      }
    }
 else {
      bodyClosure.call();
    }
    String output=capturedOut.getValue();
    if (output == null)     return BLANK_STRING;
    return output;
  }
  finally {
    if (binding != null) {
      binding.setVariable(GroovyPage.OUT,originalOut);
    }
    webRequest.setOut(originalOut);
  }
}
