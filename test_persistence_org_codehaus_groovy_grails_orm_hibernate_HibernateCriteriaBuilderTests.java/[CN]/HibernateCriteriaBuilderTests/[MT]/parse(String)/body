{
  GroovyClassLoader cl=new GroovyClassLoader();
  Class clazz=cl.parseClass("import grails.orm.*;\n" + "import org.hibernate.*;\n" + "class TestClass {\n"+ "@Property SessionFactory sf;\n"+ "@Property Class tc;\n"+ "@Property Closure test = {\n"+ "def hcb = new HibernateCriteriaBuilder(tc,sf);\n"+ "return hcb" + groovy + ";\n"+ "}\n"+ "}");
  GroovyObject go=(GroovyObject)clazz.newInstance();
  go.setProperty("sf",this.sessionFactory);
  Class tc=this.grailsApplication.getGrailsDomainClasses()[0].getClazz();
  go.setProperty("tc",tc);
  Closure closure=(Closure)go.getProperty("test");
  return (Proxy)closure.call();
}
