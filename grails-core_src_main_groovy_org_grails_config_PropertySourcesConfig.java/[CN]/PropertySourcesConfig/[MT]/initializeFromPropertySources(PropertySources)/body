{
  for (  PropertySource propertySource : propertySources) {
    if (propertySource instanceof EnumerablePropertySource) {
      EnumerablePropertySource enumerablePropertySource=(EnumerablePropertySource)propertySource;
      mergeEnumerablePropertySource(enumerablePropertySource);
    }
  }
  EnvironmentAwarePropertySource environmentAwarePropertySource=new EnvironmentAwarePropertySource(propertySources);
  mergeEnumerablePropertySource(environmentAwarePropertySource);
  if (propertySources instanceof MutablePropertySources) {
    ((MutablePropertySources)propertySources).addLast(environmentAwarePropertySource);
  }
}
