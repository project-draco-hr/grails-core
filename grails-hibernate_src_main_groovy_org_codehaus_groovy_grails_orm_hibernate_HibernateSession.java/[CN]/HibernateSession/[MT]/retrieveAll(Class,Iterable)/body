{
  final PersistentEntity persistentEntity=getMappingContext().getPersistentEntity(type.getName());
  return hibernateTemplate.execute(new HibernateCallback<List>(){
    public List doInHibernate(    org.hibernate.Session session) throws HibernateException, SQLException {
      Criteria criteria=session.createCriteria(type);
      hibernateTemplate.applySettings(criteria);
      return criteria.add(Restrictions.in(persistentEntity.getIdentity().getName(),getIterableAsCollection(keys))).list();
    }
  }
);
}
