{
  GrailsConsole console=getConsole(commandLine);
  try {
    System.setProperty("disable.grails.plugin.transform","true");
    console.updateStatus("Loading Grails " + settings.getGrailsVersion());
    loadConfigEnvironment(commandLine,settings);
    settings.initializeResourcesDir();
    System.setProperty("springloaded.directoriesContainingReloadableCode",settings.getClassesDir().getAbsolutePath() + ',' + settings.getPluginClassesDir().getAbsolutePath());
  }
 catch (  Exception e) {
    console.error("There was an error loading the BuildConfig: " + e.getMessage(),e);
    console.cleanlyExit(1);
  }
 finally {
    System.setProperty("disable.grails.plugin.transform","false");
  }
  try {
    BuildSettingsHolder.setSettings(settings);
    return callPluginOrGrailsScript(commandLine,scriptName,env);
  }
  finally {
    GrailsConsole.getInstance().flush();
    BuildSettingsHolder.setSettings(null);
  }
}
