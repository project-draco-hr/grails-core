{
  PropertyValue[] pvs=mpvs.getPropertyValues();
  for (int i=0; i < pvs.length; i++) {
    PropertyValue pv=pvs[i];
    String propertyName=pv.getName();
    int index=propertyName.indexOf(".id");
    if (index > -1) {
      BeanWrapper bean=super.getBeanWrapper();
      propertyName=propertyName.substring(0,index);
      if (bean.isReadableProperty(propertyName) && bean.isWritableProperty(propertyName)) {
        Class type=bean.getPropertyDescriptor(propertyName).getPropertyType();
        ClassLoader currentClassLoader=getClass().getClassLoader();
        ClassLoader grailsClassLoader=getTarget().getClass().getClassLoader();
        try {
          Thread.currentThread().setContextClassLoader(grailsClassLoader);
          Object persisted=null;
          persisted=InvokerHelper.invokeStaticMethod(type,"get",pv.getValue());
          if (persisted != null) {
            bean.setPropertyValue(propertyName,persisted);
          }
        }
  finally {
          Thread.currentThread().setContextClassLoader(currentClassLoader);
        }
      }
    }
  }
}
