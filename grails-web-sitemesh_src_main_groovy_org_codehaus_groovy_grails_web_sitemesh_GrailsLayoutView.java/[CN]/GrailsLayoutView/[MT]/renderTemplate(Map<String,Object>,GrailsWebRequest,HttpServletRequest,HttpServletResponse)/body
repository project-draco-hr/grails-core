{
  Content content=obtainContent(model,webRequest,request,response);
  if (content != null) {
    beforeDecorating(content,model,webRequest,request,response);
    if (!WebUtils.isIncludeRequest(request)) {
      SpringMVCViewDecorator decorator=(SpringMVCViewDecorator)groovyPageLayoutFinder.findLayout(request,content);
      if (decorator != null) {
        decorator.render(content,model,request,response,webRequest.getServletContext());
        return;
      }
    }
    PrintWriter writer=response.getWriter();
    content.writeOriginal(writer);
    if (!response.isCommitted()) {
      writer.flush();
    }
  }
}
