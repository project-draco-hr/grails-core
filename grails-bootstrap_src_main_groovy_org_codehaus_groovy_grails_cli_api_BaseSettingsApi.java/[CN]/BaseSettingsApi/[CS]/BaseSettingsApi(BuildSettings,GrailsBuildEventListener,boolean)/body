{
  this.buildSettings=settings;
  buildProps=buildSettings.getConfig().toProperties();
  grailsHome=buildSettings.getGrailsHome();
  metadataFile=new File(buildSettings.getBaseDir(),"application.properties");
  metadata=metadataFile.exists() ? Metadata.getInstance(metadataFile) : Metadata.getCurrent();
  metadataFile=metadata.getMetadataFile();
  enableProfile=Boolean.valueOf(getPropertyValue("grails.script.profile",false).toString());
  pluginsHome=buildSettings.getProjectPluginsDir().getPath();
  pluginSettings=new PluginBuildSettings(buildSettings);
  grailsAppName=metadata.getApplicationName();
  isInteractive=interactive;
  if (grailsAppName == null) {
    grailsAppName=buildSettings.getBaseDir().getName();
  }
  if (grailsAppName.indexOf('/') > -1) {
    appClassName=grailsAppName.substring(grailsAppName.lastIndexOf('/'),grailsAppName.length());
  }
 else {
    appClassName=GrailsNameUtils.getClassNameRepresentation(grailsAppName);
  }
  configSlurper=buildSettings.createConfigSlurper();
  configSlurper.setEnvironment(buildSettings.getGrailsEnv());
  this.buildEventListener=buildEventListener;
}
