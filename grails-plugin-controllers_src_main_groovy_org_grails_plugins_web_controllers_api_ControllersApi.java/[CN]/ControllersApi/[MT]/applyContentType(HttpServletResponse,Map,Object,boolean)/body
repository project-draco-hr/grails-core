{
  boolean contentTypeIsDefault=true;
  String contentType=resolveContentTypeBySourceType(renderArgument,useDefault ? TEXT_HTML : null);
  String encoding=DEFAULT_ENCODING;
  if (argMap != null) {
    if (argMap.containsKey(ARGUMENT_CONTENT_TYPE)) {
      contentType=argMap.get(ARGUMENT_CONTENT_TYPE).toString();
      contentTypeIsDefault=false;
    }
    if (argMap.containsKey(ARGUMENT_ENCODING)) {
      encoding=argMap.get(ARGUMENT_ENCODING).toString();
      contentTypeIsDefault=false;
    }
  }
  if (contentType != null) {
    setContentType(response,contentType,encoding,contentTypeIsDefault);
    return true;
  }
  return false;
}
